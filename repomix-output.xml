This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.cursor/
  rules/
    global.mdc
config/
  chatbot_config.json
services/
  __init__.py
  chatbot_service.py
static/
  css/
    style.css
  images/
    chatbot/
      README.md
  js/
    chatbot.js
templates/
  chat.html
  detail.html
  index.html
.dockerignore
.env.example
.gitattributes
.gitignore
ADVANCED_TOPICS.md
app.py
ARCHITECTURE.md
DOCKER_GUIDE.md
DOCKER_HOT_RELOAD.md
docker-compose.yml
Dockerfile
README.md
requirements.txt
vercel.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="config/chatbot_config.json">
{
  "name": "ì±—ë´‡ ì´ë¦„",
  "description": "ì—¬ê¸°ì— ì±—ë´‡ì— ëŒ€í•œ ì„¤ëª…ì„ 4-5ì¤„ë¡œ ì‘ì„±í•˜ì„¸ìš”.<br>ìºë¦­í„°ì˜ íŠ¹ì§•ì„ ì˜ ë“œëŸ¬ë‚´ê³ ,<br>ì–´ë–¤ ëŒ€í™”ë¥¼ í•  ìˆ˜ ìˆëŠ”ì§€ ì†Œê°œí•´ì£¼ì„¸ìš”.<br>HTML íƒœê·¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  "tags": ["#íƒœê·¸1", "#íƒœê·¸2", "#íƒœê·¸3", "#íƒœê·¸4"],
  "thumbnail": "images/chatbot/thumbnail.png",
  "character": {
    "age": 20,
    "university": "ëŒ€í•™êµëª…",
    "major": "ì „ê³µ",
    "personality": "ì„±ê²© ì„¤ëª…",
    "background": "ë°°ê²½ ìŠ¤í† ë¦¬"
  },
  "system_prompt": {
    "base": "ë‹¹ì‹ ì˜ ì±—ë´‡ ì—­í• ê³¼ í˜ë¥´ì†Œë‚˜ë¥¼ ì •ì˜í•˜ì„¸ìš”.",
    "rules": [
      "ë°˜ë§ì„ ì‚¬ìš©í•˜ì„¸ìš”",
      "ì´ëª¨í‹°ì½˜ì„ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”",
      "ìì—°ìŠ¤ëŸ½ê²Œ ëŒ€í™”í•˜ì„¸ìš”"
    ]
  }
}
</file>

<file path="services/__init__.py">
"""
Services íŒ¨í‚¤ì§€

ì´ íŒ¨í‚¤ì§€ëŠ” ì±—ë´‡ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
"""

from .chatbot_service import get_chatbot_service

__all__ = ['get_chatbot_service']
</file>

<file path="static/css/style.css">
/* Global Styles */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  background: #f7f7f7;
  font-family: 'Roboto', sans-serif;
}

/* Index Page Styles */
h1 {
  text-align: center;
  margin-top: 40px;
  font-weight: 700;
  color: #333;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  max-width: 1200px;
  margin: 40px auto;
  padding: 0 20px;
}

.card {
  background: #fff;
  text-align: center;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  padding: 20px;
  text-decoration: none;
  color: #333;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s, box-shadow 0.2s;
  display: flex;
  flex-direction: column;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.card img {
  width: 100%;
  height: auto;
  border-radius: 8px;
}

.card h2 {
  margin-top: auto;
  font-size: 1.5rem;
  font-weight: 500;
}

/* Chat Page Styles */
.chat-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background: #fff;
  padding: 20px;
  box-sizing: border-box;
  position: relative;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.header-left,
.header-right {
  display: flex;
  gap: 10px;
}

.header-title h1 {
  margin: 0;
  font-weight: 700;
  color: #333;
  font-size: 1.5rem;
  text-align: center;
}

.icon-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
}

.icon-btn img {
  width: 24px;
  height: 24px;
}

#chat-log {
  flex: 1;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  overflow-y: auto;
  padding: 15px;
  background: #fafafa;
  margin-bottom: 10px;
}

.message {
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 8px;
  word-break: break-all;
}

.message.user {
  background: #e6f7ff;
  text-align: right;
  color: #0056b3;
}

.message.bot {
  background: #f0f0f0;
  color: #333;
  padding: 10px;
  border-radius: 8px;
  word-break: break-all;
}

.bot-big-img {
  display: block;
  width: 100%;
  max-width: 300px;
  height: auto;
  margin: 0 auto 8px;
  border-radius: 8px;
}

.bot-text {
  text-align: left;
}

form {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

input[type="text"] {
  flex: 1;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 1rem;
}

button {
  padding: 10px 20px;
  border: none;
  background: #007bff;
  color: #fff;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.2s;
}

button:hover {
  background: #0056b3;
}

/* Modal Styles */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.5);
}

.modal-content {
  background-color: #fff;
  margin: 10% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 600px;
  border-radius: 12px;
  position: relative;
}

.modal-close {
  position: absolute;
  top: 10px;
  right: 10px;
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
}
.tags {
  margin-top: 10px;
  text-align: center;
}

.tag {
  display: inline-block;
  background-color: #000000; /* ì›í•˜ëŠ” ë°°ê²½ìƒ‰ */
  color: #555; /* ê¸€ì ìƒ‰ìƒ */
  padding: 4px 8px;
  border-radius: 12px;
  margin: 2px;
  font-size: 0.9rem;
}
</file>

<file path="static/js/chatbot.js">
console.log("ì±—ë´‡ JS ë¡œë“œ ì™„ë£Œ");

// DOM ìš”ì†Œ
const chatArea = document.querySelector(".chat-area");
const username = chatArea ? chatArea.dataset.username : "ì‚¬ìš©ì";
const chatLog = document.getElementById("chat-log");
const userMessageInput = document.getElementById("user-message");
const sendBtn = document.getElementById("send-btn");
const videoBtn = document.getElementById("videoBtn");
const imageBtn = document.getElementById("imageBtn");

// ë©”ì‹œì§€ ì „ì†¡ í•¨ìˆ˜
async function sendMessage(isInitial = false) {
  let message;

  if (isInitial) {
    message = "init";
  } else {
    message = userMessageInput.value.trim();
    if (!message) return;

    appendMessage("user", message);
    userMessageInput.value = "";
  }

  // ë¡œë”© í‘œì‹œ
  const loadingId = appendMessage("bot", "ìƒê° ì¤‘...");

  try {
    const response = await fetch("/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        message: message,
        username: username,
      }),
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();

    // ë¡œë”© ë©”ì‹œì§€ ì œê±°
    removeMessage(loadingId);

    // ì‘ë‹µ íŒŒì‹±
    let replyText, imagePath;
    if (typeof data.reply === "object" && data.reply !== null) {
      replyText = data.reply.reply || data.reply;
      imagePath = data.reply.image || null;
    } else {
      replyText = data.reply;
      imagePath = null;
    }

    appendMessage("bot", replyText, imagePath);
  } catch (err) {
    console.error("ë©”ì‹œì§€ ì „ì†¡ ì—ëŸ¬:", err);
    removeMessage(loadingId);
    appendMessage("bot", "ì£„ì†¡í•©ë‹ˆë‹¤. ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
  }
}

// ë©”ì‹œì§€ DOMì— ì¶”ê°€
let messageIdCounter = 0;
function appendMessage(sender, text, imageSrc = null) {
  const messageId = `msg-${messageIdCounter++}`;
  const messageElem = document.createElement("div");
  messageElem.classList.add("message", sender);
  messageElem.id = messageId;

  if (sender === "user") {
    messageElem.textContent = text;
  } else {
    // ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ ë¨¼ì € í‘œì‹œ
    if (imageSrc) {
      const botImg = document.createElement("img");
      botImg.classList.add("bot-big-img");
      botImg.src = imageSrc;
      botImg.alt = "ì±—ë´‡ ì´ë¯¸ì§€";
      messageElem.appendChild(botImg);
    }

    // í…ìŠ¤íŠ¸ ì¶”ê°€
    const textContainer = document.createElement("div");
    textContainer.classList.add("bot-text-container");
    textContainer.textContent = text;
    messageElem.appendChild(textContainer);
  }

  if (chatLog) {
    chatLog.appendChild(messageElem);
    chatLog.scrollTop = chatLog.scrollHeight;
  }

  return messageId;
}

// ë©”ì‹œì§€ ì œê±°
function removeMessage(messageId) {
  const elem = document.getElementById(messageId);
  if (elem) {
    elem.remove();
  }
}

// ì—”í„°í‚¤ë¡œ ì „ì†¡
if (userMessageInput) {
  userMessageInput.addEventListener("keypress", (event) => {
    if (event.key === "Enter") {
      sendMessage();
    }
  });
}

// ì „ì†¡ ë²„íŠ¼
if (sendBtn) {
  sendBtn.addEventListener("click", () => sendMessage());
}

// ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
function openModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.style.display = "block";
  }
}

function closeModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.style.display = "none";
  }
}

// ë¯¸ë””ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸
if (videoBtn) {
  videoBtn.addEventListener("click", () => openModal("videoModal"));
}

if (imageBtn) {
  imageBtn.addEventListener("click", () => openModal("imageModal"));
}

// ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼
document.querySelectorAll(".modal-close").forEach((btn) => {
  btn.addEventListener("click", () => {
    const modalId = btn.dataset.closeModal;
    closeModal(modalId);
  });
});

// ëª¨ë‹¬ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
document.querySelectorAll(".modal").forEach((modal) => {
  modal.addEventListener("click", (event) => {
    if (event.target === modal) {
      modal.style.display = "none";
    }
  });
});

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë©”ì‹œì§€ ìš”ì²­
window.addEventListener("load", () => {
  console.log("í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ");

  setTimeout(() => {
    if (chatLog && chatLog.childElementCount === 0) {
      console.log("ì´ˆê¸° ë©”ì‹œì§€ ìš”ì²­");
      sendMessage(true);
    }
  }, 500);
});
</file>

<file path=".dockerignore">
# Git
.git
.gitignore
.gitattributes

# Python
__pycache__
*.py[cod]
*$py.class
*.so
.Python
venv/
env/
*.egg-info/
dist/
build/

# IDE
.vscode/
.idea/
*.swp
*.swo
*~
.cursor/

# í™˜ê²½ë³€ìˆ˜ (ë³´ì•ˆ)
.env
*.env
!.env.example

# ë¡œê·¸
*.log

# ChromaDB (Docker volumeìœ¼ë¡œ ê´€ë¦¬)
*chardb_embedding/
*imagedb_embedding/

# Jupyter
*.ipynb
.ipynb_checkpoints

# macOS
.DS_Store

# ë¬¸ì„œ (ì„ íƒì‚¬í•­)
README*.md

# í…ŒìŠ¤íŠ¸
tests/
*.test.py

# ì„ì‹œ íŒŒì¼
*.tmp
*.bak
</file>

<file path="ADVANCED_TOPICS.md">
# ğŸš€ ê³ ê¸‰ ì£¼ì œ ë° ì„±ëŠ¥ ê°œì„  ê°€ì´ë“œ

> í”„ë¡œì íŠ¸ ì™„ì„±ë„ë¥¼ ë†’ì´ê³  ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë°©ë²• (2025ë…„ 10ì›” ê¸°ì¤€)

---

## ğŸ“š ëª©ì°¨

1. [í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ](#-í•µì‹¬-ê¸°ìˆ -ìŠ¤íƒ)
2. [ê´€ë ¨ ë…¼ë¬¸ ë° ì—°êµ¬](#-ê´€ë ¨-ë…¼ë¬¸-ë°-ì—°êµ¬)
3. [ê¶Œìœ„ìˆëŠ” í•™ìŠµ ìë£Œ](#-ê¶Œìœ„ìˆëŠ”-í•™ìŠµ-ìë£Œ)
4. [ì„±ëŠ¥ ê°œì„  ë°©ë²•](#-ì„±ëŠ¥-ê°œì„ -ë°©ë²•)
5. [ì™„ì„±ë„ í–¥ìƒ ì „ëµ](#-ì™„ì„±ë„-í–¥ìƒ-ì „ëµ)
6. [2025ë…„ ìµœì‹  íŠ¸ë Œë“œ](#-2025ë…„-ìµœì‹ -íŠ¸ë Œë“œ)

---

## ğŸ”§ í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ

### 1. RAG (Retrieval-Augmented Generation)

**ê°œë…**: ê²€ìƒ‰ê³¼ ìƒì„±ì„ ê²°í•©í•œ AI ì‹œìŠ¤í…œ

```
ì§ˆë¬¸ ì…ë ¥
  â†“
ë²¡í„° ê²€ìƒ‰ (ChromaDB)
  â†“
ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰
  â†“
LLMì— ë¬¸ì„œ + ì§ˆë¬¸ ì „ë‹¬
  â†“
ì •í™•í•œ ë‹µë³€ ìƒì„±
```

**í•µì‹¬ ë…¼ë¬¸**:

- **"Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks"** (Lewis et al., 2020)
  - https://arxiv.org/abs/2005.11401
  - RAGì˜ ê¸°ì´ˆë¥¼ ì œì‹œí•œ ë…¼ë¬¸

**ìµœì‹  ë°œì „**:

- **Self-RAG** (2024): ê²€ìƒ‰ì´ í•„ìš”í•œì§€ ìŠ¤ìŠ¤ë¡œ íŒë‹¨
- **Corrective RAG** (C-RAG, 2024): ê²€ìƒ‰ ê²°ê³¼ì˜ í’ˆì§ˆ í‰ê°€
- **Adaptive RAG** (2024): ì¿¼ë¦¬ ë³µì¡ë„ì— ë”°ë¼ ì „ëµ ë³€ê²½

### 2. Vector Embeddings

**ê°œë…**: í…ìŠ¤íŠ¸ë¥¼ ê³ ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜

**OpenAI Embeddings API**:

- **text-embedding-3-large**: 3072ì°¨ì›, ê°€ì¥ ì •í™•
- **text-embedding-3-small**: 1536ì°¨ì›, ë¹ ë¥´ê³  ì €ë ´
- **ë¹„ìš©**: $0.13 / 1M tokens (3-large ê¸°ì¤€)

**í•µì‹¬ ë…¼ë¬¸**:

- **"Attention Is All You Need"** (Vaswani et al., 2017)

  - https://arxiv.org/abs/1706.03762
  - Transformer ì•„í‚¤í…ì²˜ì˜ ê¸°ì´ˆ

- **"BERT: Pre-training of Deep Bidirectional Transformers"** (Devlin et al., 2018)
  - https://arxiv.org/abs/1810.04805
  - ë¬¸ë§¥ ê¸°ë°˜ embeddingì˜ í˜ì‹ 

### 3. Vector Database (ChromaDB)

**ê°œë…**: ë²¡í„° ìœ ì‚¬ë„ ê¸°ë°˜ ë¹ ë¥¸ ê²€ìƒ‰

**ì•Œê³ ë¦¬ì¦˜**: HNSW (Hierarchical Navigable Small World)

- **ì‹œê°„ ë³µì¡ë„**: O(log N)
- **ì •í™•ë„**: 99%+
- **í™•ì¥ì„±**: ìˆ˜ë°±ë§Œ ë²¡í„° ì§€ì›

**ëŒ€ì•ˆ ê¸°ìˆ **:

- **Pinecone**: í´ë¼ìš°ë“œ ê¸°ë°˜, ê´€ë¦¬í˜•
- **Weaviate**: GraphQL ì§€ì›, í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
- **Milvus**: ëŒ€ê·œëª¨ í”„ë¡œë•ì…˜ìš©
- **Qdrant**: Rust ê¸°ë°˜, ê³ ì„±ëŠ¥

### 4. LLM (Large Language Model)

**ì‚¬ìš© ëª¨ë¸**: GPT-4o-mini

- **ë¹„ìš© íš¨ìœ¨ì **: $0.15 / 1M ì…ë ¥ í† í°
- **ë¹ ë¥¸ ì‘ë‹µ**: ~500ms
- **ì»¨í…ìŠ¤íŠ¸**: 128K í† í°

**ìµœì‹  ëŒ€ì•ˆ** (2025ë…„ 10ì›”):

- **GPT-4.5**: ë” ì •í™•í•˜ì§€ë§Œ ë¹„ìŒˆ
- **Claude 3.5 Sonnet**: ì½”ë”©/ë¶„ì„ì— ê°•í•¨
- **Llama 3.1 (70B)**: ì˜¤í”ˆì†ŒìŠ¤, ë¡œì»¬ ì‹¤í–‰ ê°€ëŠ¥
- **Gemini 1.5 Pro**: Google, ê¸´ ì»¨í…ìŠ¤íŠ¸ ì§€ì›

---

## ğŸ“– ê´€ë ¨ ë…¼ë¬¸ ë° ì—°êµ¬

### RAG ê´€ë ¨ í•„ë… ë…¼ë¬¸

1. **"Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks"**

   - Authors: Lewis et al. (Meta AI)
   - Year: 2020
   - Link: https://arxiv.org/abs/2005.11401
   - **í•µì‹¬**: RAGì˜ ê¸°ë³¸ ê°œë…ê³¼ êµ¬ì¡°

2. **"Self-RAG: Learning to Retrieve, Generate, and Critique through Self-Reflection"**

   - Authors: Asai et al.
   - Year: 2024
   - Link: https://arxiv.org/abs/2310.11511
   - **í•µì‹¬**: ê²€ìƒ‰ í•„ìš”ì„±ì„ LLMì´ ìŠ¤ìŠ¤ë¡œ íŒë‹¨

3. **"Corrective Retrieval Augmented Generation"**

   - Authors: Yan et al.
   - Year: 2024
   - Link: https://arxiv.org/abs/2401.15884
   - **í•µì‹¬**: ê²€ìƒ‰ ê²°ê³¼ í’ˆì§ˆ í‰ê°€ ë° ë³´ì •

4. **"RAPTOR: Recursive Abstractive Processing for Tree-Organized Retrieval"**
   - Authors: Sarthi et al.
   - Year: 2024
   - Link: https://arxiv.org/abs/2401.18059
   - **í•µì‹¬**: ê³„ì¸µì  ë¬¸ì„œ êµ¬ì¡°ë¡œ ê²€ìƒ‰ ê°œì„ 

### Embedding ê´€ë ¨

5. **"Text Embeddings by Weakly-Supervised Contrastive Pre-training"**

   - Authors: Wang et al. (OpenAI)
   - Year: 2022
   - Link: https://arxiv.org/abs/2212.03533
   - **í•µì‹¬**: OpenAI embedding ëª¨ë¸ì˜ ê¸°ìˆ ì  ë°°ê²½

6. **"Matryoshka Representation Learning"**
   - Authors: Kusupati et al.
   - Year: 2022
   - Link: https://arxiv.org/abs/2205.13147
   - **í•µì‹¬**: ê°€ë³€ ì°¨ì› embedding (íš¨ìœ¨ì„± í–¥ìƒ)

### ì±—ë´‡ ë° ëŒ€í™” ì‹œìŠ¤í…œ

7. **"Constitutional AI: Harmlessness from AI Feedback"**

   - Authors: Bai et al. (Anthropic)
   - Year: 2022
   - Link: https://arxiv.org/abs/2212.08073
   - **í•µì‹¬**: ì•ˆì „í•˜ê³  ìœ ìš©í•œ ì±—ë´‡ ì„¤ê³„

8. **"LLM-as-a-Judge: Evaluating Chat Assistants with Large Language Models"**
   - Authors: Zheng et al.
   - Year: 2023
   - Link: https://arxiv.org/abs/2306.05685
   - **í•µì‹¬**: ì±—ë´‡ ì„±ëŠ¥ í‰ê°€ ë°©ë²•ë¡ 

---

## ğŸ“š ê¶Œìœ„ìˆëŠ” í•™ìŠµ ìë£Œ

### ê³µì‹ ë¬¸ì„œ

1. **OpenAI Documentation**

   - https://platform.openai.com/docs
   - Embeddings, Chat API, Best Practices

2. **LangChain Documentation**

   - https://python.langchain.com/docs
   - RAG êµ¬í˜„ íŒ¨í„´, ë©”ëª¨ë¦¬ ê´€ë¦¬

3. **ChromaDB Documentation**
   - https://docs.trychroma.com/
   - ë²¡í„° DB ìµœì í™” ê°€ì´ë“œ

### ì˜¨ë¼ì¸ ê°•ì˜

4. **DeepLearning.AI - LangChain for LLM Application Development**

   - https://www.deeplearning.ai/short-courses/
   - Andrew Ng êµìˆ˜ ê°•ì˜
   - ë¬´ë£Œ, ê³µì¸ ìˆ˜ë£Œì¦

5. **OpenAI Cookbook**
   - https://cookbook.openai.com/
   - ì‹¤ì „ ì˜ˆì œ ì½”ë“œ ëª¨ìŒ

### ì„œì 

6. **"Building LLM Apps" by Joao Moura (2024)**

   - RAG ì‹œìŠ¤í…œ êµ¬ì¶• ì‹¤ì „ ê°€ì´ë“œ

7. **"Generative AI on AWS" by Chris Fregly (2024)**
   - í”„ë¡œë•ì…˜ ë°°í¬ ê°€ì´ë“œ

### ë¸”ë¡œê·¸ & ì•„í‹°í´

8. **Pinecone Learning Center**

   - https://www.pinecone.io/learn/
   - Vector DB ê°œë… ì„¤ëª…

9. **LlamaIndex Blog**

   - https://www.llamaindex.ai/blog
   - RAG ìµœì‹  ê¸°ë²•

10. **Anthropic Research**
    - https://www.anthropic.com/research
    - LLM ì•ˆì „ì„± ì—°êµ¬

---

## ğŸš€ ì„±ëŠ¥ ê°œì„  ë°©ë²•

### 1. RAG ì„±ëŠ¥ ìµœì í™”

#### A. Embedding ì „ëµ ê°œì„ 

**í˜„ì¬**:

```python
embedding = openai.embeddings.create(
    input=query,
    model="text-embedding-3-large"
)
```

**ê°œì„  1: ì¿¼ë¦¬ í™•ì¥ (Query Expansion)**

```python
def expand_query(original_query):
    """LLMìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì—¬ëŸ¬ ê´€ì ìœ¼ë¡œ í™•ì¥"""
    prompt = f"""
    ë‹¤ìŒ ì§ˆë¬¸ì„ 3ê°€ì§€ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë‹¤ì‹œ ì‘ì„±í•˜ì„¸ìš”:
    ì§ˆë¬¸: {original_query}
    """
    expanded = llm.generate(prompt)
    return [original_query] + expanded

# ì—¬ëŸ¬ ì¿¼ë¦¬ë¡œ ê²€ìƒ‰ í›„ ê²°ê³¼ ê²°í•©
results = []
for query in expand_query(user_query):
    results.extend(search_similar(query))
```

**ê°œì„  2: Hypothetical Document Embeddings (HyDE)**

```python
def hyde_search(query):
    """ê°€ìƒ ë‹µë³€ì„ ë¨¼ì € ìƒì„± í›„ ê²€ìƒ‰"""
    # 1. LLMìœ¼ë¡œ ê°€ìƒ ë‹µë³€ ìƒì„±
    hypothetical_answer = llm.generate(
        f"ì§ˆë¬¸ì— ëŒ€í•œ ìƒì„¸í•œ ë‹µë³€ì„ ì‘ì„±í•˜ì„¸ìš”: {query}"
    )

    # 2. ê°€ìƒ ë‹µë³€ì˜ embeddingìœ¼ë¡œ ê²€ìƒ‰
    embedding = create_embedding(hypothetical_answer)
    return vector_db.search(embedding)
```

#### B. ë¦¬ë­í‚¹ (Re-ranking)

**ë¬¸ì œ**: ë²¡í„° ê²€ìƒ‰ë§Œìœ¼ë¡œëŠ” ìµœì ì´ ì•„ë‹ ìˆ˜ ìˆìŒ

**í•´ê²°**:

```python
from sentence_transformers import CrossEncoder

# 1ì°¨: ë²¡í„° ê²€ìƒ‰ (ë¹ ë¦„)
candidates = vector_db.search(query, top_k=20)

# 2ì°¨: CrossEncoderë¡œ ì •í™•ë„ ì¬í‰ê°€ (ëŠë¦¼)
reranker = CrossEncoder('cross-encoder/ms-marco-MiniLM-L-6-v2')
scores = reranker.predict([(query, doc) for doc in candidates])

# ìƒìœ„ 5ê°œë§Œ ì‚¬ìš©
top_docs = sorted(zip(candidates, scores),
                  key=lambda x: x[1], reverse=True)[:5]
```

#### C. í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰

**ë²¡í„° + í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°í•©**:

```python
def hybrid_search(query):
    # ë²¡í„° ê²€ìƒ‰ (ì˜ë¯¸ë¡ ì )
    vector_results = vector_db.search(query, top_k=10)

    # BM25 í‚¤ì›Œë“œ ê²€ìƒ‰ (ì •í™•í•œ ë§¤ì¹­)
    from rank_bm25 import BM25Okapi
    bm25_results = bm25.get_top_n(query.split(), documents, n=10)

    # ê²°ê³¼ ê²°í•© (RRF - Reciprocal Rank Fusion)
    combined = reciprocal_rank_fusion([vector_results, bm25_results])
    return combined
```

### 2. ì‘ë‹µ ìƒì„± ìµœì í™”

#### A. ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ

**í˜„ì¬**: ì „ì²´ ì‘ë‹µ ìƒì„± í›„ ë°˜í™˜ (ëŠë¦¼)

**ê°œì„ **:

```python
def generate_response_stream(user_message):
    """ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ"""
    for chunk in openai.chat.completions.create(
        model="gpt-4o-mini",
        messages=[...],
        stream=True  # â† ìŠ¤íŠ¸ë¦¬ë° í™œì„±í™”
    ):
        if chunk.choices[0].delta.content:
            yield chunk.choices[0].delta.content

# Flaskì—ì„œ
@app.route('/api/chat/stream')
def chat_stream():
    def generate():
        for text in generate_response_stream(message):
            yield f"data: {json.dumps({'text': text})}\n\n"
    return Response(generate(), mimetype='text/event-stream')
```

#### B. í”„ë¡¬í”„íŠ¸ ìµœì í™”

**í˜„ì¬**:

```
ë‹¹ì‹ ì€ ì„œê°•ëŒ€ ì„ ë°°ì…ë‹ˆë‹¤.
ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”.
```

**ê°œì„ ** (Few-Shot ì˜ˆì‹œ ì¶”ê°€):

```
ë‹¹ì‹ ì€ ì„œê°•ëŒ€ ì„ ë°°ì…ë‹ˆë‹¤.

[ì¢‹ì€ ë‹µë³€ ì˜ˆì‹œ]
ì§ˆë¬¸: í•™ì‹ ì–´ë””ê°€ ë§›ìˆì–´?
ë‹µë³€: í•™ì‹ì€ ê³¤ìê°€ 2ì¸µì´ ì œì¼ ë§›ìˆì–´. íŠ¹íˆ ìˆ˜ìš”ì¼ ëˆê¹ŒìŠ¤ëŠ” ì¤„ ì„œì„œ ë¨¹ì„ ê°€ì¹˜ê°€ ìˆì§€.
      ê°€ê²©ë„ 5,000ì›ìœ¼ë¡œ ì €ë ´í•˜ê³ , ì–‘ë„ í‘¸ì§í•´ì„œ ì¸ê¸°ê°€ ë§ì•„. ì ì‹¬ì‹œê°„(12-1ì‹œ)ì—ëŠ”
      ì‚¬ëŒì´ ë§ìœ¼ë‹ˆ 11ì‹œ 30ë¶„ì— ê°€ëŠ” ê±¸ ì¶”ì²œí•´!

ì´ì œ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”:
```

#### C. ìºì‹±

**ë™ì¼í•œ ì§ˆë¬¸ ë°˜ë³µ ì‹œ ìºì‹±**:

```python
from functools import lru_cache

@lru_cache(maxsize=100)
def cached_search(query_hash):
    """ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì€ ìºì‹±"""
    return vector_db.search(query)

# ì‚¬ìš©
query_hash = hash(user_message.lower().strip())
results = cached_search(query_hash)
```

### 3. ë°ì´í„° í’ˆì§ˆ í–¥ìƒ

#### A. ì²­í‚¹ ì „ëµ ê°œì„ 

**í˜„ì¬**: ê³ ì • í¬ê¸° (400ì)

**ê°œì„ ** (ì˜ë¯¸ ë‹¨ìœ„ ë¶„í• ):

```python
from langchain.text_splitter import RecursiveCharacterTextSplitter

splitter = RecursiveCharacterTextSplitter(
    chunk_size=500,
    chunk_overlap=50,
    separators=["\n\n", "\n", ". ", " ", ""],  # ìš°ì„ ìˆœìœ„
    length_function=len
)
```

#### B. ë©”íƒ€ë°ì´í„° ì¶”ê°€

```python
# ë” í’ë¶€í•œ ë©”íƒ€ë°ì´í„°
collection.add(
    documents=[text],
    embeddings=[embedding],
    metadatas=[{
        "type": "qa",
        "source": "í•™ì‚¬ê³µì§€",
        "date": "2025-10-01",
        "category": "í•™ì‚¬ì¼ì •",
        "importance": "high",
        "keywords": ["ìˆ˜ê°•ì‹ ì²­", "ì¼ì •"]  # í‚¤ì›Œë“œ íƒœê¹…
    }]
)

# í•„í„°ë§ ê²€ìƒ‰
results = collection.query(
    query_embeddings=[embedding],
    n_results=5,
    where={"category": "í•™ì‚¬ì¼ì •"}  # í•„í„°
)
```

### 4. ë©€í‹°ëª¨ë‹¬ ì§€ì›

#### A. ì´ë¯¸ì§€ ê²€ìƒ‰ ì¶”ê°€

```python
from PIL import Image
import clip  # OpenAI CLIP ëª¨ë¸

def search_similar_image(query_text):
    """í…ìŠ¤íŠ¸ë¡œ ì´ë¯¸ì§€ ê²€ìƒ‰"""
    # í…ìŠ¤íŠ¸ â†’ ì´ë¯¸ì§€ embedding
    text_embedding = clip.encode_text(query_text)

    # ì´ë¯¸ì§€ DBì—ì„œ ê²€ìƒ‰
    results = image_db.query(text_embedding)
    return results
```

#### B. ìŒì„± ì§€ì›

```python
from openai import OpenAI

# ìŒì„± â†’ í…ìŠ¤íŠ¸
def speech_to_text(audio_file):
    transcript = openai.audio.transcriptions.create(
        model="whisper-1",
        file=audio_file
    )
    return transcript.text

# í…ìŠ¤íŠ¸ â†’ ìŒì„±
def text_to_speech(text):
    response = openai.audio.speech.create(
        model="tts-1",
        voice="alloy",
        input=text
    )
    return response.content
```

---

## ğŸ’ ì™„ì„±ë„ í–¥ìƒ ì „ëµ

### 1. í‰ê°€ ì‹œìŠ¤í…œ êµ¬ì¶•

#### A. ìë™ í‰ê°€

```python
def evaluate_response(question, answer, ground_truth):
    """LLMìœ¼ë¡œ ë‹µë³€ í’ˆì§ˆ í‰ê°€"""
    eval_prompt = f"""
    ì§ˆë¬¸: {question}
    ë‹µë³€: {answer}
    ì •ë‹µ: {ground_truth}

    ë‹µë³€ì„ 1-5ì ìœ¼ë¡œ í‰ê°€í•˜ê³  ì´ìœ ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.
    """
    score = llm.generate(eval_prompt)
    return score
```

#### B. ì‚¬ìš©ì í”¼ë“œë°±

```python
# í”¼ë“œë°± ìˆ˜ì§‘
@app.route('/api/feedback', methods=['POST'])
def collect_feedback():
    data = request.json
    # {message_id, rating (1-5), comment}
    save_feedback(data)

    # ë‚®ì€ í‰ê°€ â†’ ìë™ìœ¼ë¡œ ë°ì´í„° ì¶”ê°€
    if data['rating'] <= 2:
        add_to_training_data(data)
```

### 2. ì•ˆì „ì„± ê°•í™”

#### A. ì½˜í…ì¸  í•„í„°ë§

```python
from openai import OpenAI

def moderate_content(text):
    """ìœ í•´ ì½˜í…ì¸  ê°ì§€"""
    response = openai.moderations.create(input=text)
    if response.results[0].flagged:
        return None, "ë¶€ì ì ˆí•œ ë‚´ìš©ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤."
    return text, None
```

#### B. PII (ê°œì¸ì •ë³´) ë³´í˜¸

```python
import re

def redact_pii(text):
    """ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹"""
    # ì „í™”ë²ˆí˜¸
    text = re.sub(r'\d{3}-\d{4}-\d{4}', '[ì „í™”ë²ˆí˜¸]', text)
    # ì´ë©”ì¼
    text = re.sub(r'\S+@\S+\.\S+', '[ì´ë©”ì¼]', text)
    # ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸
    text = re.sub(r'\d{6}-\d{7}', '[ì£¼ë¯¼ë²ˆí˜¸]', text)
    return text
```

### 3. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

```python
import time
from functools import wraps

def monitor_performance(func):
    """ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        elapsed = time.time() - start

        # ë¡œê¹… ë˜ëŠ” ë©”íŠ¸ë¦­ ì „ì†¡
        log_metric('response_time', elapsed)

        if elapsed > 3.0:
            alert('Slow response detected', elapsed)

        return result
    return wrapper
```

### 4. A/B í…ŒìŠ¤íŒ…

```python
def ab_test_strategy(user_id):
    """ë‹¤ì–‘í•œ RAG ì „ëµ í…ŒìŠ¤íŠ¸"""
    strategy = hash(user_id) % 3

    if strategy == 0:
        # ê¸°ë³¸ RAG
        return basic_rag
    elif strategy == 1:
        # HyDE ì „ëµ
        return hyde_rag
    else:
        # í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
        return hybrid_rag
```

---

## ğŸŒŸ 2025ë…„ ìµœì‹  íŠ¸ë Œë“œ

### 1. Agentic RAG

**ê°œë…**: LLMì´ ìŠ¤ìŠ¤ë¡œ ë„êµ¬ë¥¼ ì„ íƒí•˜ê³  ì‹¤í–‰

```python
from langchain.agents import create_react_agent

tools = [
    VectorSearchTool(),
    WebSearchTool(),
    CalculatorTool(),
    WikipediaTool()
]

agent = create_react_agent(
    llm=ChatOpenAI(model="gpt-4o"),
    tools=tools,
    prompt=agent_prompt
)

# LLMì´ í•„ìš”ì— ë”°ë¼ ë„êµ¬ ì„ íƒ
result = agent.run("2024ë…„ ë…¸ë²¨ë¬¼ë¦¬í•™ìƒ ìˆ˜ìƒìëŠ”?")
```

### 2. Graph RAG

**ê°œë…**: ì§€ì‹ì„ ê·¸ë˜í”„ êµ¬ì¡°ë¡œ ì €ì¥

```python
from neo4j import GraphDatabase

# ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¶•
CREATE (í•™ì‹:Entity {name: "í•™ì‹"})
CREATE (ê³¤ìê°€:Entity {name: "ê³¤ìê°€"})
CREATE (í•™ì‹)-[:LOCATED_AT]->(ê³¤ìê°€)
CREATE (í•™ì‹)-[:HAS_MENU {price: 5000}]->(ëˆê¹ŒìŠ¤)

# ê·¸ë˜í”„ ê¸°ë°˜ ê²€ìƒ‰
def graph_rag(query):
    # 1. ì—”í‹°í‹° ì¶”ì¶œ
    entities = extract_entities(query)

    # 2. ê·¸ë˜í”„ íƒìƒ‰
    subgraph = neo4j.query(f"MATCH path=({entities[0]})-[*1..3]-()")

    # 3. ì„œë¸Œê·¸ë˜í”„ë¥¼ ì»¨í…ìŠ¤íŠ¸ë¡œ ì œê³µ
    return generate_with_graph_context(query, subgraph)
```

### 3. ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ

```python
# ì „ë¬¸í™”ëœ ì—ì´ì „íŠ¸ë“¤
researcher_agent = Agent(role="ì •ë³´ ìˆ˜ì§‘", tools=[search])
writer_agent = Agent(role="ë‹µë³€ ì‘ì„±", tools=[llm])
critic_agent = Agent(role="í’ˆì§ˆ ê²€ì¦", tools=[evaluator])

def multi_agent_response(query):
    # 1. ì •ë³´ ìˆ˜ì§‘
    info = researcher_agent.run(query)

    # 2. ë‹µë³€ ì‘ì„±
    draft = writer_agent.run(info)

    # 3. ê²€ì¦ ë° ê°œì„ 
    final = critic_agent.review_and_improve(draft)

    return final
```

### 4. ì§€ì†ì  í•™ìŠµ (Continual Learning)

```python
def continual_learning():
    """ì‚¬ìš©ì í”¼ë“œë°±ìœ¼ë¡œ ì§€ì† ê°œì„ """

    # 1. í”¼ë“œë°± ìˆ˜ì§‘
    feedbacks = get_new_feedbacks()

    # 2. íŒŒì¸íŠœë‹ ë°ì´í„°ì…‹ êµ¬ì¶•
    training_data = []
    for fb in feedbacks:
        if fb.rating >= 4:  # ì¢‹ì€ ë‹µë³€
            training_data.append({
                "question": fb.question,
                "answer": fb.answer
            })

    # 3. Embedding ì¬í•™ìŠµ ë˜ëŠ” í”„ë¡¬í”„íŠ¸ ê°œì„ 
    update_system_prompt(training_data)

    # 4. ìƒˆë¡œìš´ ë°ì´í„° ì¶”ê°€
    add_to_vector_db(training_data)
```

---

## ğŸ“Š ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

### ëª©í‘œ ì§€í‘œ (í”„ë¡œë•ì…˜)

| ë©”íŠ¸ë¦­        | ëª©í‘œ         | ì¸¡ì • ë°©ë²•   |
| ------------- | ------------ | ----------- |
| **ì‘ë‹µ ì‹œê°„** | < 2ì´ˆ        | í‰ê·         |
| **ì •í™•ë„**    | > 85%        | ì‚¬ìš©ì í‰ê°€ |
| **ë§Œì¡±ë„**    | > 4.0/5.0    | í”¼ë“œë°±      |
| **ê°€ìš©ì„±**    | > 99%        | Uptime      |
| **ë¹„ìš©**      | < $0.05/ëŒ€í™” | API ë¹„ìš©    |

### ì¸¡ì • ë„êµ¬

```python
import prometheus_client as prom

# ë©”íŠ¸ë¦­ ì •ì˜
response_time = prom.Histogram('response_time_seconds', 'Response time')
accuracy_score = prom.Gauge('accuracy_score', 'Answer accuracy')

# ì¸¡ì •
with response_time.time():
    answer = generate_response(query)

accuracy_score.set(evaluate_accuracy(answer))
```

---

## ğŸ¯ í”„ë¡œì íŠ¸ ì™„ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ë³¸ (í•„ìˆ˜)

- [ ] RAG ì‹œìŠ¤í…œ ë™ì‘
- [ ] 5ê°œ ì´ìƒ Q&A ë°ì´í„°
- [ ] ê¸°ë³¸ UI ì™„ì„±
- [ ] Vercel ë°°í¬

### ì¤‘ê¸‰ (ê¶Œì¥)

- [ ] 20ê°œ ì´ìƒ Q&A ë°ì´í„°
- [ ] ë¦¬ë­í‚¹ êµ¬í˜„
- [ ] ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ
- [ ] ì—ëŸ¬ ì²˜ë¦¬
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘

### ê³ ê¸‰ (ì°¨ë³„í™”)

- [ ] í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
- [ ] ë©€í‹°ëª¨ë‹¬ (ì´ë¯¸ì§€)
- [ ] A/B í…ŒìŠ¤íŒ…
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [ ] ì§€ì†ì  í•™ìŠµ

---

## ğŸ“– ë” ì½ì–´ë³¼ ìë£Œ

### ìµœì‹  ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ (2025)

1. **"State of RAG 2025"** - LangChain Blog
   - https://blog.langchain.com/
2. **"Production RAG at Scale"** - Pinecone

   - https://www.pinecone.io/blog/

3. **"Advanced RAG Techniques"** - LlamaIndex
   - https://www.llamaindex.ai/blog/

### ì»¤ë®¤ë‹ˆí‹°

4. **r/LangChain** (Reddit)

   - ì‹¤ì „ ì‚¬ë¡€ ê³µìœ 

5. **LangChain Discord**
   - https://discord.gg/langchain
   - ì‹¤ì‹œê°„ ì§ˆë¬¸/ë‹µë³€

---

**í”„ë¡œì íŠ¸ë¥¼ í•œ ë‹¨ê³„ ë” ë°œì „ì‹œì¼œ ë³´ì„¸ìš”!** ğŸš€
</file>

<file path="DOCKER_HOT_RELOAD.md">
# ğŸ”¥ Docker Hot Reloading ê°€ì´ë“œ

> ì½”ë“œ ìˆ˜ì • ì‹œ ì¦‰ì‹œ ë°˜ì˜í•˜ê¸°

---

## ğŸ¯ Hot Reloadingì´ë€?

ì½”ë“œë¥¼ ìˆ˜ì •í•˜ë©´ **Docker ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘í•˜ì§€ ì•Šê³ ë„** ë³€ê²½ì‚¬í•­ì´ ìë™ìœ¼ë¡œ ë°˜ì˜ë˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

---

## âš¡ ë¹ ë¥¸ ì‚¬ìš©ë²•

### ìƒí™©ë³„ ëª…ë ¹ì–´

| ìˆ˜ì •í•œ íŒŒì¼                             | ëª…ë ¹ì–´                      | ì ìš© ì‹œê°„ |
| --------------------------------------- | --------------------------- | --------- |
| **Python ì½”ë“œ** (`app.py`, `services/`) | ìë™ (ê°œë°œ ëª¨ë“œ)            | ì¦‰ì‹œ      |
| **HTML** (`templates/`)                 | ìƒˆë¡œê³ ì¹¨ë§Œ                  | ì¦‰ì‹œ      |
| **CSS/JS** (`static/`)                  | ìƒˆë¡œê³ ì¹¨ë§Œ                  | ì¦‰ì‹œ      |
| **Config** (`config/`)                  | ìë™ (ê°œë°œ ëª¨ë“œ)            | ì¦‰ì‹œ      |
| **requirements.txt**                    | `docker compose up --build` | 2-3ë¶„     |
| **Dockerfile**                          | `docker compose up --build` | 2-3ë¶„     |
| **.env**                                | `docker compose restart`    | 5ì´ˆ       |

---

## ğŸ”§ ì„¤ì • í™•ì¸

### docker compose.yml í™•ì¸

```yaml
services:
  chatbot:
    environment:
      - FLASK_ENV=development # âœ… ê°œë°œ ëª¨ë“œ
      - FLASK_DEBUG=True # âœ… ë””ë²„ê·¸ ëª¨ë“œ
    volumes:
      - ./app.py:/app/app.py # âœ… ë§ˆìš´íŠ¸
      - ./services:/app/services # âœ… ë§ˆìš´íŠ¸
      - ./templates:/app/templates # âœ… ë§ˆìš´íŠ¸
      - ./static:/app/static # âœ… ë§ˆìš´íŠ¸
```

**ëª¨ë‘ âœ…ë©´ Hot Reloading í™œì„±í™”!**

---

## ğŸ“ ì‹¤ì „ ì˜ˆì‹œ

### ì˜ˆì‹œ 1: Python ì½”ë“œ ìˆ˜ì •

```bash
# 1. Docker ì‹¤í–‰ (í•œ ë²ˆë§Œ)
docker compose up

# 2. services/chatbot_service.py ìˆ˜ì •
# (ì—ë””í„°ì—ì„œ ì½”ë“œ ìˆ˜ì •)

# 3. í„°ë¯¸ë„ í™•ì¸
# * Detected change in '/app/services/chatbot_service.py', reloading
# * Restarting with stat

# 4. ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨
# âœ… ë³€ê²½ì‚¬í•­ ë°˜ì˜ë¨!
```

### ì˜ˆì‹œ 2: HTML/CSS ìˆ˜ì •

```bash
# 1. templates/chat.html ë˜ëŠ” static/css/style.css ìˆ˜ì •

# 2. ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ (Ctrl+Shift+R ë˜ëŠ” Cmd+Shift+R)
# âœ… ì¦‰ì‹œ ë°˜ì˜ë¨!
```

### ì˜ˆì‹œ 3: íŒ¨í‚¤ì§€ ì¶”ê°€

```bash
# 1. requirements.txtì— ìƒˆ íŒ¨í‚¤ì§€ ì¶”ê°€
echo "requests==2.31.0" >> requirements.txt

# 2. ì¬ë¹Œë“œ í•„ìš”
docker compose down
docker compose up --build

# â±ï¸ 2-3ë¶„ ì†Œìš”
```

### ì˜ˆì‹œ 4: í™˜ê²½ë³€ìˆ˜ ë³€ê²½

```bash
# 1. .env íŒŒì¼ ìˆ˜ì •
nano .env

# 2. ì»¨í…Œì´ë„ˆë§Œ ì¬ì‹œì‘
docker compose restart chatbot

# â±ï¸ 5ì´ˆ ì†Œìš”
```

---

## ğŸ› Hot Reloadingì´ ì•ˆ ë  ë•Œ

### 1. Flaskê°€ ì¬ì‹œì‘ ì•ˆ ë¨

**ì¦ìƒ**: ì½”ë“œ ìˆ˜ì •í•´ë„ ë°˜ì˜ ì•ˆ ë¨

**í•´ê²°**:

```bash
# docker compose.yml í™•ì¸
environment:
  - FLASK_ENV=development  # â† ì´ê²Œ developmentì¸ì§€ í™•ì¸
  - FLASK_DEBUG=True       # â† ì´ê²Œ Trueì¸ì§€ í™•ì¸

# ë³€ê²½ í›„ ì¬ì‹œì‘
docker compose restart chatbot
```

### 2. íŒŒì¼ì´ ë§ˆìš´íŠ¸ ì•ˆ ë¨

**ì¦ìƒ**: íŒŒì¼ ìˆ˜ì •í•´ë„ ì»¨í…Œì´ë„ˆì— ë°˜ì˜ ì•ˆ ë¨

**í•´ê²°**:

```bash
# docker compose.ymlì˜ volumes í™•ì¸
volumes:
  - ./services:/app/services  # â† ê²½ë¡œê°€ ë§ëŠ”ì§€ í™•ì¸

# í™•ì¸ ë°©ë²•
docker compose exec chatbot ls -la /app/services
```

### 3. ìºì‹œ ë¬¸ì œ

**ì¦ìƒ**: ë¸Œë¼ìš°ì €ì—ì„œ ë³€ê²½ì‚¬í•­ ì•ˆ ë³´ì„

**í•´ê²°**:

```bash
# ê°•ë ¥ ìƒˆë¡œê³ ì¹¨
# Chrome/Edge: Ctrl+Shift+R (Windows/Linux) / Cmd+Shift+R (Mac)
# Firefox: Ctrl+F5 (Windows/Linux) / Cmd+Shift+R (Mac)
```

### 4. Syntax Errorë¡œ Flask ì¤‘ë‹¨

**ì¦ìƒ**: ì½”ë“œ ìˆ˜ì • í›„ ì„œë²„ê°€ ì™„ì „íˆ ë©ˆì¶¤

**í•´ê²°**:

```bash
# 1. ë¡œê·¸ í™•ì¸
docker compose logs -f chatbot

# 2. ì—ëŸ¬ í™•ì¸ í›„ ì½”ë“œ ìˆ˜ì •

# 3. ì €ì¥í•˜ë©´ ìë™ìœ¼ë¡œ ì¬ì‹œì‘ ì‹œë„
```

---

## ğŸ’¡ ìœ ìš©í•œ ëª…ë ¹ì–´ ëª¨ìŒ

```bash
# ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸ (Hot Reload ë©”ì‹œì§€ ë³´ê¸°)
docker compose logs -f chatbot

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ (ë¹ ë¦„)
docker compose restart chatbot

# ì™„ì „ ì¬ì‹œì‘ (ì¤‘ê°„ ì†ë„)
docker compose down && docker compose up

# ì¬ë¹Œë“œ (ëŠë¦¼, íŒ¨í‚¤ì§€ ë³€ê²½ ì‹œ)
docker compose up --build

# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì† (ë””ë²„ê¹…)
docker compose exec chatbot bash

# íŠ¹ì • íŒŒì¼ì´ ë§ˆìš´íŠ¸ë˜ì—ˆëŠ”ì§€ í™•ì¸
docker compose exec chatbot cat /app/services/chatbot_service.py
```

---

## ğŸ¯ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### âœ… DO

```bash
# 1. ê°œë°œ ì¤‘ì—ëŠ” ê°œë°œ ëª¨ë“œ ìœ ì§€
FLASK_ENV=development
FLASK_DEBUG=True

# 2. ë¡œê·¸ë¥¼ í•­ìƒ ì¼œë‘ê¸°
docker compose logs -f chatbot

# 3. ë³€ê²½ í›„ í„°ë¯¸ë„ì—ì„œ ì¬ì‹œì‘ ë©”ì‹œì§€ í™•ì¸
# * Restarting with stat

# 4. Python íŒŒì¼ ìˆ˜ì • â†’ í„°ë¯¸ë„ í™•ì¸ â†’ ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨
```

### âŒ DON'T

```bash
# 1. ë§¤ë²ˆ docker compose up --build í•˜ì§€ ë§ˆì„¸ìš”
# (ì‹œê°„ ë‚­ë¹„, Python/HTML/CSSëŠ” ìë™ ë°˜ì˜)

# 2. production ëª¨ë“œë¡œ ê°œë°œí•˜ì§€ ë§ˆì„¸ìš”
FLASK_ENV=production  # â† Hot Reload ì•ˆ ë¨!

# 3. ë³€ê²½ í›„ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘í•˜ì§€ ë§ˆì„¸ìš”
# (ë¶ˆí•„ìš”, ìë™ìœ¼ë¡œ reloadë¨)
```

---

## ğŸš€ ì„±ëŠ¥ ìµœì í™” íŒ

### 1. Docker Volume ì„±ëŠ¥ í–¥ìƒ (macOS)

macOSì—ì„œ volumesê°€ ëŠë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**í•´ê²°ì±…**:

```yaml
# docker compose.yml
volumes:
  - ./services:/app/services:delegated # â† delegated ì¶”ê°€
```

### 2. .dockerignore ìµœì í™”

ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œì™¸:

```
__pycache__
*.pyc
.git
.vscode
venv/
```

### 3. ì„ íƒì  ì¬ì‹œì‘

ì „ì²´ ì¬ì‹œì‘ ëŒ€ì‹ :

```bash
# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ì¬ì‹œì‘
docker compose restart chatbot

# ì „ì²´ ì¬ì‹œì‘ (ëŠë¦¼)
docker compose restart  # â† í”¼í•˜ê¸°
```

---

## ğŸ“Š ê°œë°œ vs Production

| í•­ëª©            | ê°œë°œ          | Production   |
| --------------- | ------------- | ------------ |
| **FLASK_ENV**   | `development` | `production` |
| **FLASK_DEBUG** | `True`        | `False`      |
| **Hot Reload**  | âœ… í™œì„±í™”     | âŒ ë¹„í™œì„±í™”  |
| **ì—ëŸ¬ í‘œì‹œ**   | ìƒì„¸          | ê°„ë‹¨         |
| **ì„±ëŠ¥**        | ëŠë¦¼          | ë¹ ë¦„         |

**ë°°í¬ ì „ í™•ì¸**:

```yaml
# docker compose.yml (production)
environment:
  - FLASK_ENV=production
  - FLASK_DEBUG=False
```

---

## ğŸ†˜ ë¬¸ì œ í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸

Hot Reloadê°€ ì•ˆ ë  ë•Œ ìˆœì„œëŒ€ë¡œ í™•ì¸:

- [ ] `FLASK_ENV=development` í™•ì¸
- [ ] `FLASK_DEBUG=True` í™•ì¸
- [ ] `volumes` ê²½ë¡œ í™•ì¸
- [ ] ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘: `docker compose restart chatbot`
- [ ] ë¡œê·¸ í™•ì¸: `docker compose logs -f chatbot`
- [ ] ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ (Ctrl+Shift+R)
- [ ] ì½”ë“œ Syntax Error í™•ì¸
- [ ] ì¬ë¹Œë“œ: `docker compose up --build`

**ì—¬ì „íˆ ì•ˆ ë˜ë©´**:

```bash
# ì™„ì „íˆ ì´ˆê¸°í™”
docker compose down -v
docker compose up --build
```

---

## ğŸ’¡ ìš”ì•½

```bash
# ì¼ë°˜ ê°œë°œ ì›Œí¬í”Œë¡œìš°
1. docker compose up         # í•œ ë²ˆë§Œ
2. ì½”ë“œ ìˆ˜ì •                  # ì—ë””í„°
3. í„°ë¯¸ë„ í™•ì¸               # Restarting ë©”ì‹œì§€
4. ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨          # ë³€ê²½ì‚¬í•­ í™•ì¸

# íŒ¨í‚¤ì§€ ì¶”ê°€ ì‹œì—ë§Œ
docker compose up --build

# í™˜ê²½ë³€ìˆ˜ ë³€ê²½ ì‹œì—ë§Œ
docker compose restart chatbot
```

**ê°œë°œ ëª¨ë“œ = ìë™ ë°˜ì˜! ğŸ‰**
</file>

<file path="vercel.json">
{
  "version": 2,
  "builds": [
    {
      "src": "app.py",
      "use": "@vercel/python"
    }
  ],
  "routes": [
    {
      "src": "/static/(.*)",
      "dest": "/static/$1"
    },
    {
      "src": "/(.*)",
      "dest": "app.py"
    }
  ],
  "env": {
    "FLASK_ENV": "production"
  }
}
</file>

<file path=".cursor/rules/global.mdc">
---
description:
globs:
alwaysApply: true
---

- í•´ë‹¹ í”„ë¡œì íŠ¸ëŠ” ê³¼ì œ í”„ë¡œì íŠ¸ íŒŒì¼ì´ë‹¤.
- ì‚¬ìš©ìëŠ” êµìˆ˜ìì´ê³  í•™ìƒë“¤ì—ê²Œ ê³¼ì œë¥¼ ë‚´ê¸°ì „ì— ê³¼ì œë¥¼ ì§ì ‘ ìˆ˜í–‰ í›„ ë°°í¬ê¹Œì§€ í•œ ì‚¬ì´í´ì„ ëŒë ¤ë³´ê¸¸ ì›í•œë‹¤.
- README.md ì™€ ARCHITECTURE.md ê¸°ë°˜ìœ¼ë¡œ docker í™˜ê²½ì—ì„œ ê³¼ì œë¥¼ ìˆ˜í–‰í•˜ê³  vercelì„ ì´ìš©í•´ ë°°í¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.
- vercel clië¥¼ í™œìš©í•˜ë¼.
</file>

<file path="services/chatbot_service.py">
"""
ğŸ¯ ì±—ë´‡ ì„œë¹„ìŠ¤ - êµ¬í˜„ íŒŒì¼

ì´ íŒŒì¼ì€ ì±—ë´‡ì˜ í•µì‹¬ AI ë¡œì§ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
ì•„ë˜ ì•„í‚¤í…ì²˜ë¥¼ ì°¸ê³ í•˜ì—¬ ì§ì ‘ ì„¤ê³„í•˜ê³  êµ¬í˜„í•˜ì„¸ìš”.

ğŸ“ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì´ˆê¸°í™” ë‹¨ê³„ (ChatbotService.__init__)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - OpenAI Client ìƒì„±                                    â”‚
â”‚  - ChromaDB ì—°ê²° (ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤)                       â”‚
â”‚  - LangChain Memory ì´ˆê¸°í™” (ëŒ€í™” ê¸°ë¡ ê´€ë¦¬)               â”‚
â”‚  - Config íŒŒì¼ ë¡œë“œ                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. RAG íŒŒì´í”„ë¼ì¸ (generate_response ë‚´ë¶€)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ì‚¬ìš©ì ì§ˆë¬¸ "í•™ì‹ ì¶”ì²œí•´ì¤˜"                              â”‚
â”‚       â†“                                                  â”‚
â”‚  [_create_embedding()]                                   â”‚
â”‚       â†“                                                  â”‚
â”‚  ì§ˆë¬¸ ë²¡í„°: [0.12, -0.34, ..., 0.78]  (3072ì°¨ì›)        â”‚
â”‚       â†“                                                  â”‚
â”‚  [_search_similar()]  â† ChromaDB ê²€ìƒ‰                    â”‚
â”‚       â†“                                                  â”‚
â”‚  ê²€ìƒ‰ ê²°ê³¼: "í•™ì‹ì€ ê³¤ìê°€ê°€ ë§›ìˆì–´" (ìœ ì‚¬ë„: 0.87)        â”‚
â”‚       â†“                                                  â”‚
â”‚  [_build_prompt()]                                       â”‚
â”‚       â†“                                                  â”‚
â”‚  ìµœì¢… í”„ë¡¬í”„íŠ¸ = ì‹œìŠ¤í…œ ì„¤ì • + RAG ì»¨í…ìŠ¤íŠ¸ + ì§ˆë¬¸        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. LLM ì‘ë‹µ ìƒì„±                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OpenAI GPT-4 API í˜¸ì¶œ                                   â”‚
â”‚       â†“                                                  â”‚
â”‚  "í•™ì‹ì€ ê³¤ìê°€ì—ì„œ ë¨¹ëŠ” ê²Œ ì œì¼ ì¢‹ì•„! ëˆê¹ŒìŠ¤ê°€ ì¸ê¸°ì•¼"    â”‚
â”‚       â†“                                                  â”‚
â”‚  [ì„ íƒ: ì´ë¯¸ì§€ ê²€ìƒ‰]                                      â”‚
â”‚       â†“                                                  â”‚
â”‚  ì‘ë‹µ ë°˜í™˜: {reply: "...", image: "..."}                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ë©”ëª¨ë¦¬ ì €ì¥ (LangChain Memory)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ëŒ€í™” ê¸°ë¡ì— ì§ˆë¬¸-ì‘ë‹µ ì €ì¥                               â”‚
â”‚  ë‹¤ìŒ ëŒ€í™”ì—ì„œ ì»¨í…ìŠ¤íŠ¸ë¡œ í™œìš©                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ’¡ í•µì‹¬ êµ¬í˜„ ê³¼ì œ:

1. **Embedding ìƒì„±**
   - OpenAI APIë¥¼ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ë²¡í„°ë¡œ ë³€í™˜
   - ëª¨ë¸: text-embedding-3-large (3072ì°¨ì›)

2. **RAG ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜** â­ ê°€ì¥ ì¤‘ìš”!
   - ChromaDBì—ì„œ ìœ ì‚¬ ë²¡í„° ê²€ìƒ‰
   - ìœ ì‚¬ë„ ê³„ì‚°: similarity = 1 / (1 + distance)
   - threshold ì´ìƒì¸ ë¬¸ì„œë§Œ ì„ íƒ

3. **LLM í”„ë¡¬í”„íŠ¸ ì„¤ê³„**
   - ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (ìºë¦­í„° ì„¤ì •)
   - RAG ì»¨í…ìŠ¤íŠ¸ í†µí•©
   - ëŒ€í™” ê¸°ë¡ í¬í•¨

4. **ëŒ€í™” ë©”ëª¨ë¦¬ ê´€ë¦¬**
   - LangChainì˜ ConversationSummaryBufferMemory ì‚¬ìš©
   - ëŒ€í™”ê°€ ê¸¸ì–´ì§€ë©´ ìë™ìœ¼ë¡œ ìš”ì•½


ğŸ“š ì°¸ê³  ë¬¸ì„œ:
- ARCHITECTURE.md: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìƒì„¸ ì„¤ëª…
- IMPLEMENTATION_GUIDE.md: ë‹¨ê³„ë³„ êµ¬í˜„ ê°€ì´ë“œ
- README.md: í”„ë¡œì íŠ¸ ê°œìš”


âš ï¸ ì£¼ì˜ì‚¬í•­:
- ì´ íŒŒì¼ì˜ êµ¬ì¡°ëŠ” ê°€ì´ë“œì¼ ë¿ì…ë‹ˆë‹¤
- ììœ ë¡­ê²Œ ì¬ì„¤ê³„í•˜ê³  í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ë‹¨, generate_response() í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ëŠ” ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤
  (app.pyì—ì„œ í˜¸ì¶œí•˜ê¸° ë•Œë¬¸)
"""

import os
from pathlib import Path
from dotenv import load_dotenv
import json

# í™˜ê²½ë³€ìˆ˜ ë¡œë“œ
load_dotenv()

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ
BASE_DIR = Path(__file__).resolve().parent.parent


class ChatbotService:
    """
    ì±—ë´‡ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤
    
    ì´ í´ë˜ìŠ¤ëŠ” ì±—ë´‡ì˜ ëª¨ë“  AI ë¡œì§ì„ ìº¡ìŠí™”í•©ë‹ˆë‹¤.
    
    ì£¼ìš” ì±…ì„:
    1. OpenAI API ê´€ë¦¬
    2. ChromaDB ë²¡í„° ê²€ìƒ‰
    3. LangChain ë©”ëª¨ë¦¬ ê´€ë¦¬
    4. ì‘ë‹µ ìƒì„± íŒŒì´í”„ë¼ì¸
    
    í•™ìƒì´ êµ¬í˜„í•´ì•¼ í•  ë©”ì„œë“œ:
    - __init__: ëª¨ë“  êµ¬ì„± ìš”ì†Œ ì´ˆê¸°í™”
    - _load_config: ì„¤ì • íŒŒì¼ ë¡œë“œ
    - _init_chromadb: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
    - _create_embedding: í…ìŠ¤íŠ¸ â†’ ë²¡í„° ë³€í™˜
    - _search_similar: RAG ê²€ìƒ‰ ìˆ˜í–‰ (í•µì‹¬!)
    - _build_prompt: í”„ë¡¬í”„íŠ¸ êµ¬ì„±
    - generate_response: ìµœì¢… ì‘ë‹µ ìƒì„± (ëª¨ë“  ë¡œì§ í†µí•©)
    """
    
    def __init__(self):
        """
        ì±—ë´‡ ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
        
        TODO: ë‹¤ìŒ êµ¬ì„± ìš”ì†Œë“¤ì„ ì´ˆê¸°í™”í•˜ì„¸ìš”
        
        1. Config ë¡œë“œ
           - config/chatbot_config.json íŒŒì¼ ì½ê¸°
           - ì±—ë´‡ ì´ë¦„, ì„¤ëª…, ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ë“±
        
        2. OpenAI Client
           - API í‚¤: os.getenv("OPENAI_API_KEY")
           - from openai import OpenAI
           - self.client = OpenAI(api_key=...)
        
        3. ChromaDB
           - í…ìŠ¤íŠ¸ ì„ë² ë”© ì»¬ë ‰ì…˜ ì—°ê²°
           - ê²½ë¡œ: static/data/chatbot/chardb_embedding
           - self.collection = ...
        
        4. LangChain Memory (ì„ íƒ)
           - ConversationSummaryBufferMemory
           - ëŒ€í™” ê¸°ë¡ ê´€ë¦¬
           - self.memory = ...
        
        íŒíŠ¸:
        - ChromaDB: import chromadb
        - LangChain: from langchain.memory import ConversationSummaryBufferMemory
        """
        print("[ChatbotService] ì´ˆê¸°í™” ì¤‘...")
        
        # ì—¬ê¸°ì— ì´ˆê¸°í™” ì½”ë“œ ì‘ì„±
        self.config = {}
        self.client = None
        self.collection = None
        self.memory = None
        
        print("[ChatbotService] ì´ˆê¸°í™” ì™„ë£Œ")
    
    
    def _load_config(self):
        """
        ì„¤ì • íŒŒì¼ ë¡œë“œ
        
        TODO: config/chatbot_config.json ì½ì–´ì„œ ë°˜í™˜
        
        ë°˜í™˜ê°’ ì˜ˆì‹œ:
        {
            "name": "ê¹€ì„œê°•",
            "character": {...},
            "system_prompt": {...}
        }
        """
        pass
    
    
    def _init_chromadb(self):
        """
        ChromaDB ì´ˆê¸°í™” ë° ì»¬ë ‰ì…˜ ë°˜í™˜
        
        TODO: 
        1. PersistentClient ìƒì„±
        2. ì»¬ë ‰ì…˜ ê°€ì ¸ì˜¤ê¸° (ì´ë¦„: "rag_collection")
        3. ì»¬ë ‰ì…˜ ë°˜í™˜
        
        íŒíŠ¸:
        - import chromadb
        - db_path = BASE_DIR / "static/data/chatbot/chardb_embedding"
        - client = chromadb.PersistentClient(path=str(db_path))
        - collection = client.get_collection(name="rag_collection")
        """
        pass
    
    
    def _create_embedding(self, text: str) -> list:
        """
        í…ìŠ¤íŠ¸ë¥¼ ì„ë² ë”© ë²¡í„°ë¡œ ë³€í™˜
        
        Args:
            text (str): ì„ë² ë”©í•  í…ìŠ¤íŠ¸
        
        Returns:
            list: 3072ì°¨ì› ë²¡í„° (text-embedding-3-large ëª¨ë¸)
        
        TODO:
        1. OpenAI API í˜¸ì¶œ
        2. embeddings.create() ì‚¬ìš©
        3. ë²¡í„° ë°˜í™˜
        
        íŒíŠ¸:
        - response = self.client.embeddings.create(
        -     input=[text],
        -     model="text-embedding-3-large"
        - )
        - return response.data[0].embedding
        """
        pass
    
    
    def _search_similar(self, query: str, threshold: float = 0.45, top_k: int = 5):
        """
        RAG ê²€ìƒ‰: ìœ ì‚¬í•œ ë¬¸ì„œ ì°¾ê¸° (í•µì‹¬ ë©”ì„œë“œ!)
        
        Args:
            query (str): ê²€ìƒ‰ ì§ˆì˜
            threshold (float): ìœ ì‚¬ë„ ì„ê³„ê°’ (0.3-0.5 ê¶Œì¥)
            top_k (int): ê²€ìƒ‰í•  ë¬¸ì„œ ê°œìˆ˜
        
        Returns:
            tuple: (document, similarity, metadata) ë˜ëŠ” (None, None, None)
        
        TODO: RAG ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
        
        1. ì¿¼ë¦¬ ì„ë² ë”© ìƒì„±
           query_embedding = self._create_embedding(query)
        
        2. ChromaDB ê²€ìƒ‰
           results = self.collection.query(
               query_embeddings=[query_embedding],
               n_results=top_k,
               include=["documents", "distances", "metadatas"]
           )
        
        3. ìœ ì‚¬ë„ ê³„ì‚° ë° í•„í„°ë§
           for doc, dist, meta in zip(...):
               similarity = 1 / (1 + dist)  â† ìœ ì‚¬ë„ ê³µì‹!
               if similarity >= threshold:
                   ...
        
        4. ê°€ì¥ ìœ ì‚¬í•œ ë¬¸ì„œ ë°˜í™˜
           return (best_document, best_similarity, metadata)
        
        
        ğŸ’¡ í•µì‹¬ ê°œë…:
        
        - Distance vs Similarity
          Â· ChromaDBëŠ” "ê±°ë¦¬(distance)"ë¥¼ ë°˜í™˜ (ì‘ì„ìˆ˜ë¡ ìœ ì‚¬)
          Â· ìš°ë¦¬ëŠ” "ìœ ì‚¬ë„(similarity)"ë¡œ ë³€í™˜ (í´ìˆ˜ë¡ ìœ ì‚¬)
          Â· ë³€í™˜ ê³µì‹: similarity = 1 / (1 + distance)
        
        - Threshold
          Â· 0.3: ë§¤ìš° ëŠìŠ¨í•œ ë§¤ì¹­ (ê´€ë ¨ì„± ë‚®ì•„ë„ OK)
          Â· 0.45: ì ë‹¹í•œ ë§¤ì¹­ (ì¶”ì²œ!)
          Â· 0.7: ë§¤ìš° ì—„ê²©í•œ ë§¤ì¹­ (ì •í™•í•œ ë‹µë§Œ)
        
        - Top K
          Â· 5-10ê°œ ì •ë„ ê²€ìƒ‰
          Â· ê·¸ ì¤‘ threshold ë„˜ëŠ” ê²ƒë§Œ ì‚¬ìš©
        
        
        ğŸ› ë””ë²„ê¹… íŒ:
        - print()ë¡œ ê²€ìƒ‰ ê²°ê³¼ í™•ì¸
        - ìœ ì‚¬ë„ ê°’ í™•ì¸ (ë„ˆë¬´ ë‚®ìœ¼ë©´ threshold ì¡°ì •)
        - ê²€ìƒ‰ëœ ë¬¸ì„œ ë‚´ìš© í™•ì¸
        """
        pass
    
    
    def _build_prompt(self, user_message: str, context: str = None, username: str = "ì‚¬ìš©ì"):
        """
        LLM í”„ë¡¬í”„íŠ¸ êµ¬ì„±
        
        Args:
            user_message (str): ì‚¬ìš©ì ë©”ì‹œì§€
            context (str): RAG ê²€ìƒ‰ ê²°ê³¼ (ì„ íƒ)
            username (str): ì‚¬ìš©ì ì´ë¦„
        
        Returns:
            str: ìµœì¢… í”„ë¡¬í”„íŠ¸
        
        TODO:
        1. ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ê°€ì ¸ì˜¤ê¸° (configì—ì„œ)
        2. RAG ì»¨í…ìŠ¤íŠ¸ í¬í•¨ ì—¬ë¶€ ê²°ì •
        3. ëŒ€í™” ê¸°ë¡ í¬í•¨ (ì„ íƒ)
        4. ìµœì¢… í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ ë°˜í™˜
        
        í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ:
        ```
        ë‹¹ì‹ ì€ ì„œê°•ëŒ€í•™êµ ì„ ë°° ê¹€ì„œê°•ì…ë‹ˆë‹¤.
        ì‹ ì…ìƒë“¤ì—ê²Œ í•™êµ ìƒí™œì„ ì•Œë ¤ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
        
        [ì°¸ê³  ì •ë³´]  â† RAG ì»¨í…ìŠ¤íŠ¸ê°€ ìˆì„ ë•Œë§Œ
        í•™ì‹ì€ ê³¤ìê°€ê°€ ë§›ìˆì–´. ëˆê¹ŒìŠ¤ê°€ ì¸ê¸°ì•¼.
        
        ì‚¬ìš©ì: í•™ì‹ ì¶”ì²œí•´ì¤˜
        ```
        """
        pass
    
    
    def generate_response(self, user_message: str, username: str = "ì‚¬ìš©ì") -> dict:
        """
        ì‚¬ìš©ì ë©”ì‹œì§€ì— ëŒ€í•œ ì±—ë´‡ ì‘ë‹µ ìƒì„±
        
        Args:
            user_message (str): ì‚¬ìš©ì ì…ë ¥
            username (str): ì‚¬ìš©ì ì´ë¦„
        
        Returns:
            dict: {
                'reply': str,       # ì±—ë´‡ ì‘ë‹µ í…ìŠ¤íŠ¸
                'image': str|None   # ì´ë¯¸ì§€ ê²½ë¡œ (ì„ íƒ)
            }
        
        
        TODO: ì „ì²´ ì‘ë‹µ ìƒì„± íŒŒì´í”„ë¼ì¸ êµ¬í˜„
        
        
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ“‹ êµ¬í˜„ ë‹¨ê³„
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        [1ë‹¨ê³„] ì´ˆê¸° ë©”ì‹œì§€ ì²˜ë¦¬
        
            if user_message.strip().lower() == "init":
                # ì²« ì¸ì‚¬ë§ ë°˜í™˜
                bot_name = self.config.get('name', 'ì±—ë´‡')
                return {
                    'reply': f"ì•ˆë…•! ë‚˜ëŠ” {bot_name}ì´ì•¼.",
                    'image': None
                }
        
        
        [2ë‹¨ê³„] RAG ê²€ìƒ‰ ìˆ˜í–‰
        
            context, similarity, metadata = self._search_similar(
                query=user_message,
                threshold=0.45,
                top_k=5
            )
            
            has_context = (context is not None)
        
        
        [3ë‹¨ê³„] í”„ë¡¬í”„íŠ¸ êµ¬ì„±
        
            prompt = self._build_prompt(
                user_message=user_message,
                context=context,
                username=username
            )
        
        
        [4ë‹¨ê³„] LLM API í˜¸ì¶œ
        
            response = self.client.chat.completions.create(
                model="gpt-4o-mini",  # ë˜ëŠ” gpt-4
                messages=[
                    {"role": "system", "content": "ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸"},
                    {"role": "user", "content": prompt}
                ],
                temperature=0.7,
                max_tokens=500
            )
            
            reply = response.choices[0].message.content
        
        
        [5ë‹¨ê³„] ë©”ëª¨ë¦¬ ì €ì¥ (ì„ íƒ)
        
            if self.memory:
                self.memory.save_context(
                    {"input": user_message},
                    {"output": reply}
                )
        
        
        [6ë‹¨ê³„] ì‘ë‹µ ë°˜í™˜
        
            return {
                'reply': reply,
                'image': None  # ì´ë¯¸ì§€ ê²€ìƒ‰ ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
            }
        
        
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        1. RAG í™œìš©
           - ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆìœ¼ë©´ í”„ë¡¬í”„íŠ¸ì— í¬í•¨
           - ì—†ìœ¼ë©´ ì¼ë°˜ ëŒ€í™” ëª¨ë“œ
        
        2. ì—ëŸ¬ ì²˜ë¦¬
           - try-exceptë¡œ API ì˜¤ë¥˜ ì²˜ë¦¬
           - ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì‘ë‹µ ë°˜í™˜
        
        3. ë¡œê¹…
           - ê° ë‹¨ê³„ë§ˆë‹¤ print()ë¡œ ìƒíƒœ ì¶œë ¥
           - ë””ë²„ê¹…ì— ë§¤ìš° ìœ ìš©!
        
        4. í™•ì¥ì„±
           - ì´ë¯¸ì§€ ê²€ìƒ‰ ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
           - ê°ì • ë¶„ì„ ì¶”ê°€ ê°€ëŠ¥
           - ë‹¤ì¤‘ ì–¸ì–´ ì§€ì› ê°€ëŠ¥
        
        
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ› ë””ë²„ê¹… ì˜ˆì‹œ
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        print(f"\n{'='*50}")
        print(f"[USER] {username}: {user_message}")
        print(f"[RAG] Context found: {has_context}")
        if has_context:
            print(f"[RAG] Similarity: {similarity:.4f}")
            print(f"[RAG] Context: {context[:100]}...")
        print(f"[LLM] Calling API...")
        print(f"[BOT] {reply}")
        print(f"{'='*50}\n")
        """
        
        # ì—¬ê¸°ì— ì „ì²´ íŒŒì´í”„ë¼ì¸ êµ¬í˜„
        # ìœ„ì˜ ë‹¨ê³„ë¥¼ ì°¸ê³ í•˜ì—¬ ììœ ë¡­ê²Œ ì„¤ê³„í•˜ì„¸ìš”
        
        try:
            # êµ¬í˜„ ì‹œì‘
            pass
            
        except Exception as e:
            print(f"[ERROR] ì‘ë‹µ ìƒì„± ì‹¤íŒ¨: {e}")
            return {
                'reply': "ì£„ì†¡í•´ìš”, ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",
                'image': None
            }


# ============================================================================
# ì‹±ê¸€í†¤ íŒ¨í„´
# ============================================================================
# ChatbotService ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì•± ì „ì²´ì—ì„œ ì¬ì‚¬ìš©
# (ë§¤ë²ˆ ìƒˆë¡œ ì´ˆê¸°í™”í•˜ë©´ ë¹„íš¨ìœ¨ì )

_chatbot_service = None

def get_chatbot_service():
    """
    ì±—ë´‡ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜ (ì‹±ê¸€í†¤)
    
    ì²« í˜¸ì¶œ ì‹œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±, ì´í›„ ì¬ì‚¬ìš©
    """
    global _chatbot_service
    if _chatbot_service is None:
        _chatbot_service = ChatbotService()
    return _chatbot_service


# ============================================================================
# í…ŒìŠ¤íŠ¸ìš© ë©”ì¸ í•¨ìˆ˜
# ============================================================================

if __name__ == "__main__":
    """
    ë¡œì»¬ í…ŒìŠ¤íŠ¸ìš©
    
    ì‹¤í–‰ ë°©ë²•:
    python services/chatbot_service.py
    """
    print("ì±—ë´‡ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸")
    print("=" * 50)
    
    service = get_chatbot_service()
    
    # ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
    response = service.generate_response("init", "í…ŒìŠ¤í„°")
    print(f"ì´ˆê¸° ì‘ë‹µ: {response}")
    
    # ì¼ë°˜ ëŒ€í™” í…ŒìŠ¤íŠ¸
    response = service.generate_response("ì•ˆë…•í•˜ì„¸ìš”!", "í…ŒìŠ¤í„°")
    print(f"ì‘ë‹µ: {response}")
</file>

<file path="static/images/chatbot/README.md">
# ğŸ–¼ï¸ ì´ë¯¸ì§€ í´ë”

ì´ í´ë”ì— ì±—ë´‡ì— ì‚¬ìš©í•  ì´ë¯¸ì§€ íŒŒì¼ì„ ì¶”ê°€í•˜ì„¸ìš”.
</file>

<file path=".env.example">
# .env.example

# OpenAI API Key (í•„ìˆ˜)
OPENAI_API_KEY=your_openai_api_key_here

# Flask Configuration
FLASK_ENV=development
FLASK_DEBUG=True

# Application Settings
SECRET_KEY=your_secret_key_here
PORT=5000
</file>

<file path=".gitattributes">
# --- ê¸°ë³¸ í…ìŠ¤íŠ¸ íŒŒì¼ ì„¤ì • ---
# í…ìŠ¤íŠ¸ íŒŒì¼ì€ ìë™ìœ¼ë¡œ ê°œí–‰ ë¬¸ì ì •ê·œí™” (LFë¡œ í†µì¼)
* text=auto eol=lf

# --- ì½”ë“œ íŒŒì¼ (ì–¸ì–´ë³„) ---
*.js     text
*.jsx    text
*.ts     text
*.tsx    text
*.py     text
*.sh     text
*.json   text
*.yml    text
*.yaml   text
*.md     text

# --- OS ë³„ ìŠ¤í¬ë¦½íŠ¸ í˜¸í™˜ì„± ---
*.bat    text eol=crlf
*.ps1    text eol=crlf

# --- ì´ë¯¸ì§€ ë° ë¯¸ë””ì–´ íŒŒì¼ (Git LFS ì‚¬ìš©) ---
*.png filter=lfs diff=lfs merge=lfs -text
*.jpg filter=lfs diff=lfs merge=lfs -text
*.jpeg filter=lfs diff=lfs merge=lfs -text
*.gif filter=lfs diff=lfs merge=lfs -text
*.mp4 filter=lfs diff=lfs merge=lfs -text
*.mov filter=lfs diff=lfs merge=lfs -text
*.webp filter=lfs diff=lfs merge=lfs -text

# --- ëª¨ë¸ ë° ë°ì´í„° íŒŒì¼ (Git LFS ì‚¬ìš©) ---
*.pt filter=lfs diff=lfs merge=lfs -text     # PyTorch ëª¨ë¸
*.pth filter=lfs diff=lfs merge=lfs -text
*.ckpt filter=lfs diff=lfs merge=lfs -text   # Checkpoint
*.h5 filter=lfs diff=lfs merge=lfs -text     # Keras ëª¨ë¸
*.onnx filter=lfs diff=lfs merge=lfs -text
*.pkl filter=lfs diff=lfs merge=lfs -text    # Pickle ë°ì´í„°
*.npz filter=lfs diff=lfs merge=lfs -text    # Numpy ì••ì¶•
*.npy filter=lfs diff=lfs merge=lfs -text
*.csv filter=lfs diff=lfs merge=lfs -text
*.parquet filter=lfs diff=lfs merge=lfs -text
*.zip filter=lfs diff=lfs merge=lfs -text
*.tar filter=lfs diff=lfs merge=lfs -text

# --- ê¸°íƒ€ (í°íŠ¸, ë””ìì¸ ë¦¬ì†ŒìŠ¤ ë“±) ---
*.ttf filter=lfs diff=lfs merge=lfs -text
*.otf filter=lfs diff=lfs merge=lfs -text
*.psd filter=lfs diff=lfs merge=lfs -text
*.ai  filter=lfs diff=lfs merge=lfs -text
</file>

<file path=".gitignore">
# í™˜ê²½ë³€ìˆ˜
.env
*.env
!.env.example

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
*.egg
*.egg-info/
dist/
build/
venv/
env/

# í¬ë¡œë§ˆDB ê´€ë ¨ ìºì‹œ/í´ë”
*chroma_db*
*__chroma_db__*
*chardb_embedding/
*imagedb_embedding/

# Jupyter Notebook
*.ipynb
.ipynb_checkpoints

# ì—ë””í„°
.vscode/
.idea/
*.swp
*.swo
*~

# macOS
.DS_Store

# Vercel
.vercel

# ë¡œê·¸
*.log

# ì„ì‹œ íŒŒì¼
*.tmp
*.bak
</file>

<file path="ARCHITECTURE.md">
# ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> ì±—ë´‡ í”„ë¡œì íŠ¸ì˜ ì „ì²´ êµ¬ì¡°ì™€ ë°ì´í„° íë¦„

---

## ğŸ“Š ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì‚¬ìš©ì                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTP Request/Response
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend Layer                              â”‚
â”‚  (Vanilla JavaScript + HTML/CSS)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“„ templates/                                                   â”‚
â”‚    â”œâ”€â”€ index.html         - ë©”ì¸ í˜ì´ì§€                          â”‚
â”‚    â”œâ”€â”€ detail.html        - ìƒì„¸ í˜ì´ì§€                          â”‚
â”‚    â””â”€â”€ chat.html          - ì±„íŒ… ì¸í„°í˜ì´ìŠ¤                       â”‚
â”‚                                                                  â”‚
â”‚  ğŸ“œ static/js/                                                   â”‚
â”‚    â””â”€â”€ chatbot.js         - ì±„íŒ… UI ë¡œì§                         â”‚
â”‚                            (ë©”ì‹œì§€ ì „ì†¡, ë Œë”ë§)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ POST /api/chat
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend Layer                               â”‚
â”‚  (Flask Web Framework)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ app.py                                                       â”‚
â”‚    â”œâ”€â”€ @app.route('/')              - ë©”ì¸ í˜ì´ì§€               â”‚
â”‚    â”œâ”€â”€ @app.route('/detail')        - ìƒì„¸ í˜ì´ì§€               â”‚
â”‚    â”œâ”€â”€ @app.route('/chat')          - ì±„íŒ… í˜ì´ì§€               â”‚
â”‚    â”œâ”€â”€ @app.route('/api/chat')      - ì±—ë´‡ API â­               â”‚
â”‚    â””â”€â”€ @app.route('/health')        - í—¬ìŠ¤ì²´í¬                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ get_chatbot_service()
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Service Layer                               â”‚
â”‚  (Business Logic - íŒ€ë³„ êµ¬í˜„ ì˜ì—­)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§  services/chatbot_service.py                                  â”‚
â”‚                                                                  â”‚
â”‚  class ChatbotService:                                           â”‚
â”‚    â”‚                                                             â”‚
â”‚    â”œâ”€â”€ __init__()                                               â”‚
â”‚    â”‚    â”œâ”€â”€ OpenAI Client ì´ˆê¸°í™”                                â”‚
â”‚    â”‚    â”œâ”€â”€ ChromaDB ì—°ê²°                                       â”‚
â”‚    â”‚    â””â”€â”€ LangChain Memory ì„¤ì •                               â”‚
â”‚    â”‚                                                             â”‚
â”‚    â”œâ”€â”€ _create_embedding(text)                                  â”‚
â”‚    â”‚    â””â”€â”€ OpenAI API â†’ ë²¡í„° ë³€í™˜                              â”‚
â”‚    â”‚                                                             â”‚
â”‚    â”œâ”€â”€ _search_similar(query)         â­ RAG í•µì‹¬!             â”‚
â”‚    â”‚    â”œâ”€â”€ 1. ì¿¼ë¦¬ ì„ë² ë”© ìƒì„±                                  â”‚
â”‚    â”‚    â”œâ”€â”€ 2. ChromaDB ê²€ìƒ‰                                    â”‚
â”‚    â”‚    â”œâ”€â”€ 3. ìœ ì‚¬ë„ ê³„ì‚°                                       â”‚
â”‚    â”‚    â””â”€â”€ 4. ìµœì  ë¬¸ì„œ ë°˜í™˜                                    â”‚
â”‚    â”‚                                                             â”‚
â”‚    â”œâ”€â”€ _build_prompt(message, context)                          â”‚
â”‚    â”‚    â””â”€â”€ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ + RAG ì»¨í…ìŠ¤íŠ¸                       â”‚
â”‚    â”‚                                                             â”‚
â”‚    â””â”€â”€ generate_response(user_message)                          â”‚
â”‚         â”œâ”€â”€ 1. RAG ê²€ìƒ‰                                          â”‚
â”‚         â”œâ”€â”€ 2. í”„ë¡¬í”„íŠ¸ êµ¬ì„±                                      â”‚
â”‚         â”œâ”€â”€ 3. LLM API í˜¸ì¶œ                                      â”‚
â”‚         â”œâ”€â”€ 4. ë©”ëª¨ë¦¬ ì €ì¥                                        â”‚
â”‚         â””â”€â”€ 5. ì‘ë‹µ ë°˜í™˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚            â”‚
               â†“            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   OpenAI     â”‚  â”‚   ChromaDB   â”‚
    â”‚   API        â”‚  â”‚   (Vector    â”‚
    â”‚              â”‚  â”‚   Database)  â”‚
    â”‚ - Embedding  â”‚  â”‚              â”‚
    â”‚ - GPT-4      â”‚  â”‚ - Text DB    â”‚
    â”‚ - Memory     â”‚  â”‚ - Image DB   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ë°ì´í„° íë¦„ (Request â†’ Response)

### 1ï¸âƒ£ ì‚¬ìš©ì ë©”ì‹œì§€ ì…ë ¥

```
ì‚¬ìš©ì: "í•™ì‹ ì¶”ì²œí•´ì¤˜"
  â†“
Frontend (chatbot.js)
  â†“
fetch('/api/chat', {
  method: 'POST',
  body: JSON.stringify({
    message: "í•™ì‹ ì¶”ì²œí•´ì¤˜",
    username: "í™ê¸¸ë™"
  })
})
```

### 2ï¸âƒ£ Backend ë¼ìš°íŒ…

```
Flask (app.py)
  â†“
@app.route('/api/chat', methods=['POST'])
def api_chat():
    # ìš”ì²­ íŒŒì‹±
    user_message = request.json['message']

    # ì„œë¹„ìŠ¤ í˜¸ì¶œ
    chatbot = get_chatbot_service()
    response = chatbot.generate_response(user_message)

    return jsonify(response)
```

### 3ï¸âƒ£ AI ë¡œì§ ì²˜ë¦¬ (í•µì‹¬)

```
ChatbotService (chatbot_service.py)
  â†“
[1ë‹¨ê³„] Embedding ìƒì„±
  "í•™ì‹ ì¶”ì²œí•´ì¤˜"
    â†’ OpenAI API
    â†’ [0.12, -0.34, ..., 0.78]  (3072ì°¨ì› ë²¡í„°)

[2ë‹¨ê³„] RAG ê²€ìƒ‰
  query_embedding = [0.12, -0.34, ..., 0.78]
    â†“
  ChromaDB.query(query_embedding)
    â†“
  ê²€ìƒ‰ ê²°ê³¼:
    - "í•™ì‹ì€ ê³¤ìê°€ê°€ ë§›ìˆì–´" (ê±°ë¦¬: 0.15)
    - "ë„ì„œê´€ì€ 10ì‹œê¹Œì§€" (ê±°ë¦¬: 0.98)
    â†“
  ìœ ì‚¬ë„ ê³„ì‚°:
    - similarityâ‚ = 1/(1+0.15) = 0.87 âœ… (ì„ íƒ!)
    - similarityâ‚‚ = 1/(1+0.98) = 0.50 âŒ (ì œì™¸)

[3ë‹¨ê³„] í”„ë¡¬í”„íŠ¸ êµ¬ì„±
  system_prompt = """
  ë‹¹ì‹ ì€ ì„œê°•ëŒ€ ì„ ë°°ì…ë‹ˆë‹¤.
  ì‹ ì…ìƒë“¤ì—ê²Œ í•™êµ ìƒí™œì„ ì•Œë ¤ì£¼ì„¸ìš”.
  """

  rag_context = """
  [ì°¸ê³  ì •ë³´]
  í•™ì‹ì€ ê³¤ìê°€ê°€ ë§›ìˆì–´.
  """

  final_prompt = system_prompt + rag_context + user_message

[4ë‹¨ê³„] LLM API í˜¸ì¶œ
  OpenAI.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
      {"role": "system", "content": system_prompt},
      {"role": "user", "content": final_prompt}
    ]
  )
    â†“
  "í•™ì‹ì€ ê³¤ìê°€ì—ì„œ ë¨¹ëŠ” ê²Œ ì œì¼ ì¢‹ì•„! ëˆê¹ŒìŠ¤ê°€ íŠ¹íˆ ì¸ê¸°ì•¼ ğŸ˜‹"

[5ë‹¨ê³„] ì‘ë‹µ ë°˜í™˜
  {
    "reply": "í•™ì‹ì€ ê³¤ìê°€ì—ì„œ...",
    "image": null
  }
```

### 4ï¸âƒ£ Frontend ë Œë”ë§

```
chatbot.js
  â†“
response = await fetch('/api/chat', ...)
  â†“
ë´‡ ë©”ì‹œì§€ DOM ìƒì„±
  â†“
ì±„íŒ… UIì— í‘œì‹œ
```

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡° (MVC íŒ¨í„´ ê¸°ë°˜)

ìˆ˜ì • ê¸ˆì§€ íŒŒì¼ ìˆ˜ì •ì„ ì›í•œë‹¤ë©´, ì˜ì¡´ì„±ì´ ìˆëŠ” íŒŒì¼ë„ ëª¨ë‘ í•¨ê»˜ ìˆ˜ì •í•˜ì…”ì•¼ ì œëŒ€ë¡œ ë™ì‘í•©ë‹ˆë‹¤!

```
chatbot-project/
â”‚
â”œâ”€â”€ ğŸš« [í…œí”Œë¦¿ - ìˆ˜ì • ê¸ˆì§€]
â”‚   â”‚
â”‚   â”œâ”€â”€ app.py                          # Controller (Flask ë¼ìš°íŒ…)
â”‚   â”œâ”€â”€ templates/                      # View (HTML)
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ detail.html
â”‚   â”‚   â””â”€â”€ chat.html
â”‚   â”œâ”€â”€ static/                         # View Assets
â”‚   â”‚   â”œâ”€â”€ css/style.css
â”‚   â”‚   â””â”€â”€ js/chatbot.js
â”‚   â”‚
â”‚   â”œâ”€â”€ Dockerfile                      # Docker ì„¤ì •
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ requirements.txt                # Python íŒ¨í‚¤ì§€
â”‚   â””â”€â”€ vercel.json                     # Vercel ë°°í¬ ì„¤ì •
â”‚
â”œâ”€â”€ âœï¸ [íŒ€ë³„ êµ¬í˜„ ì˜ì—­]
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                       # Service Layer (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ chatbot_service.py         # â­ í•µì‹¬ AI ë¡œì§
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                         # Configuration
â”‚   â”‚   â””â”€â”€ chatbot_config.json        # ì±—ë´‡ ì„¤ì •
â”‚   â”‚
â”‚   â””â”€â”€ static/data/chatbot/            # Data
â”‚       â”œâ”€â”€ chardb_text/               # í…ìŠ¤íŠ¸ ë°ì´í„°
â”‚       â”œâ”€â”€ chardb_embedding/          # ì„ë² ë”© ë²¡í„°
â”‚       â”œâ”€â”€ images/                    # ì´ë¯¸ì§€ íŒŒì¼
â”‚       â””â”€â”€ videos/                    # ë¹„ë””ì˜¤ íŒŒì¼ (ì„ íƒ)
â”‚
â””â”€â”€ ğŸ“š [ë¬¸ì„œ]
    â”œâ”€â”€ README.md
    â”œâ”€â”€ ARCHITECTURE.md                 # ì´ ë¬¸ì„œ
    â”œâ”€â”€ ASSIGNMENT_GUIDE.md
    â”œâ”€â”€ DOCKER_HOT_RELOADING.md
    â””â”€â”€ DOCKER_GUIDE.md
```

---

## ğŸ§© í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 1. ChatbotService (services/chatbot_service.py)

**ì—­í• **: ì±—ë´‡ì˜ ëª¨ë“  AI ë¡œì§ ë‹´ë‹¹

**ì±…ì„**:

- OpenAI API ê´€ë¦¬
- ChromaDB ë²¡í„° ê²€ìƒ‰ (RAG)
- LangChain ë©”ëª¨ë¦¬ ê´€ë¦¬
- ì‘ë‹µ ìƒì„± íŒŒì´í”„ë¼ì¸

**ì£¼ìš” ë©”ì„œë“œ**:

```python
class ChatbotService:
    def __init__(self):
        """ì´ˆê¸°í™”"""

    def _create_embedding(self, text: str) -> list:
        """í…ìŠ¤íŠ¸ â†’ ë²¡í„° ë³€í™˜"""

    def _search_similar(self, query: str):
        """RAG ê²€ìƒ‰ (í•µì‹¬!)"""

    def _build_prompt(self, message: str, context: str):
        """í”„ë¡¬í”„íŠ¸ êµ¬ì„±"""

    def generate_response(self, user_message: str) -> dict:
        """ìµœì¢… ì‘ë‹µ ìƒì„± (í†µí•©)"""
```

### 2. Flask App (app.py)

**ì—­í• **: HTTP ë¼ìš°íŒ… ë° í…œí”Œë¦¿ ë Œë”ë§

**ì±…ì„**:

- URL ë¼ìš°íŒ…
- ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬
- í…œí”Œë¦¿ ë Œë”ë§
- ì—ëŸ¬ í•¸ë“¤ë§

**ì£¼ìš” ë¼ìš°íŠ¸**:

```python
@app.route('/')                    # ë©”ì¸ í˜ì´ì§€
@app.route('/detail')              # ìƒì„¸ í˜ì´ì§€
@app.route('/chat')                # ì±„íŒ… í˜ì´ì§€
@app.route('/api/chat')            # ì±—ë´‡ API
@app.route('/health')              # í—¬ìŠ¤ì²´í¬
```

### 3. ChromaDB (Vector Database)

**ì—­í• **: ì„ë² ë”© ë²¡í„° ì €ì¥ ë° ê²€ìƒ‰

**êµ¬ì¡°**:

```
static/data/chatbot/chardb_embedding/
â”œâ”€â”€ chroma.sqlite3           # ë©”íƒ€ë°ì´í„°
â””â”€â”€ [UUID]/                  # ë²¡í„° ì¸ë±ìŠ¤
    â”œâ”€â”€ data_level0.bin      # HNSW ì•Œê³ ë¦¬ì¦˜
    â”œâ”€â”€ header.bin
    â””â”€â”€ link_lists.bin
```

**ë°ì´í„° ìŠ¤í‚¤ë§ˆ**:

```python
{
    "id": "1",
    "embedding": [0.12, -0.34, ..., 0.78],  # 3072ì°¨ì›
    "document": "í•™ì‹ì€ ê³¤ìê°€ê°€ ë§›ìˆì–´",
    "metadata": {
        "type": "qa",
        "keywords": "í•™ì‹, ì¶”ì²œ",
        "filename": "qa.txt"
    }
}
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### Backend

- **Flask 3.0**: Python ì›¹ í”„ë ˆì„ì›Œí¬
- **OpenAI API**: LLM ë° Embedding
- **ChromaDB**: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
- **LangChain**: LLM í†µí•© í”„ë ˆì„ì›Œí¬

### Frontend

- **Vanilla JavaScript**: í”„ë ˆì„ì›Œí¬ ì—†ì´ ìˆœìˆ˜ JS
- **HTML5/CSS3**: ê¸°ë³¸ ì›¹ API

### Infrastructure

- **Docker**: ì»¨í…Œì´ë„ˆí™”
- **Vercel**: ë°°í¬ í”Œë«í¼
- **Python 3.11**: ëŸ°íƒ€ì„

---

## ğŸ¯ íŒ€ë³„ êµ¬í˜„ ë²”ìœ„

### âœ… ì œê³µë˜ëŠ” ê²ƒ (í…œí”Œë¦¿)

- Flask ì•± êµ¬ì¡° (app.py)
- HTML/CSS/JS (í”„ë¡ íŠ¸ì—”ë“œ)
- Docker ì„¤ì •
- ê°€ì´ë“œ ë¬¸ì„œ

### âœï¸ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê²ƒ (í•µì‹¬)

1. **ChatbotService í´ë˜ìŠ¤**

   - OpenAI Client ì´ˆê¸°í™”
   - ChromaDB ì—°ê²°
   - Embedding ìƒì„± í•¨ìˆ˜
   - RAG ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ â­
   - LLM í”„ë¡¬í”„íŠ¸ ì„¤ê³„
   - ì‘ë‹µ ìƒì„± íŒŒì´í”„ë¼ì¸

2. **ë°ì´í„° ì¤€ë¹„**
   í”„ë¡œë“€ì„œì™€ í˜‘ì—…í•˜ì—¬ ë°ì´í„°ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.

   - í…ìŠ¤íŠ¸ ë°ì´í„° ì‘ì„±
   - ì´ë¯¸ì§€ ìˆ˜ì§‘
   - DB ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸

3. **ì„¤ì • íŒŒì¼**
   - chatbot_config.json
   - .env (API í‚¤)

---

## ğŸš€ í™•ì¥ ê°€ëŠ¥ì„±

### ì¶”ê°€ ê°€ëŠ¥í•œ ê¸°ëŠ¥

1. **ë©€í‹°ëª¨ë‹¬ ì‘ë‹µ**

   - ì´ë¯¸ì§€ ê²€ìƒ‰ ì¶”ê°€
   - ì´ë¯¸ì§€ ì„ë² ë”© DB í™œìš©

2. **ê³ ê¸‰ RAG**

   - ì¬ìˆœìœ„(Re-ranking)
   - í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (í‚¤ì›Œë“œ + ë²¡í„°)
   - ë¬¸ì„œ ì²­í‚¹ ì „ëµ

3. **ëŒ€í™” ê´€ë¦¬**

   - ì„¸ì…˜ë³„ ë©”ëª¨ë¦¬
   - ì¥ê¸° ê¸°ì–µ (ë²¡í„° DBì— ì €ì¥)

4. **ê°ì • ë¶„ì„**

   - ì‚¬ìš©ì ê°ì • íŒŒì•…
   - ê°ì •ì— ë§ëŠ” ì‘ë‹µ

5. **ë‹¤êµ­ì–´ ì§€ì›**
   - ì–¸ì–´ ê°ì§€
   - ë‹¤êµ­ì–´ ì„ë² ë”©

---

## ğŸ“š ì¶”ê°€ í•™ìŠµ ìë£Œ

- [OpenAI API ê³µì‹ ë¬¸ì„œ](https://platform.openai.com/docs)
- [ChromaDB ê³µì‹ ë¬¸ì„œ](https://docs.trychroma.com/)
- [LangChain ê³µì‹ ë¬¸ì„œ](https://python.langchain.com/)
- [Flask ê³µì‹ ë¬¸ì„œ](https://flask.palletsprojects.com/)
</file>

<file path="requirements.txt">
beautifulsoup4==4.13.5
chromadb==1.1.0
Flask==3.1.2
langchain==0.3.27
langchain_chroma==0.2.6
langchain_community==0.3.29
langchain_openai==0.3.33
numpy==2.3.3
openai==1.108.2
python-dotenv==1.1.1
scikit_learn==1.7.2
selenium==4.35.0
</file>

<file path="templates/detail.html">
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ bot.name }} - ìƒì„¸ ì •ë³´</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "IBM Plex Sans KR", sans-serif;
        background: rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }
      .modal-container {
        max-width: 500px;
        width: 90%;
        margin: 20px auto;
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
      }
      .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;

        padding: 15px 20px;
      }
      .modal-header h2 {
        margin: 0;
        flex: 1;
        text-align: center;
        font-size: 1.5rem;
        color: #333;
      }
      .close-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #666;
      }
      .modal-content {
        padding: 30px;
      }
      .bot-image {
        width: 100%;
        max-width: 300px;
        height: auto;
        border-radius: 12px;
        display: block;
        margin: 0 auto 20px;
      }
      .bot-info {
        text-align: center;
      }
      .bot-info h1 {
        margin: 0 0 15px 0;
        font-size: 2rem;
        color: #333;
      }
      .bot-info p {
        margin: 15px 0;
        font-size: 1rem;
        color: #666;
        line-height: 1.6;
      }
      .tags {
        margin: 15px 0;
      }
      .tag {
        display: inline-block;
        background: #e0e0e0;
        color: #555;
        padding: 6px 12px;
        border-radius: 15px;
        margin: 4px;
        font-size: 0.9rem;
      }
      .username-area {
        margin: 20px 0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }
      .username-area label {
        font-size: 1rem;
        color: #333;
      }
      .username-area input {
        padding: 8px 12px;
        font-size: 1rem;
        border: 2px solid #ddd;
        border-radius: 8px;
        width: 50%;
        transition: border 0.2s;
      }
      .username-area input:focus {
        outline: none;
        border-color: #764ba2;
      }
      .start-chat {
        display: block;
        margin: 20px 0;
        padding: 12px 20px;
        background: #764ba2;
        color: #fff;
        text-decoration: none;
        border-radius: 8px;
        font-size: 1.1rem;
        text-align: center;
        cursor: pointer;
        transition: transform 0.2s;
      }
      .start-chat:hover {
        transform: translateY(-2px);
      }
    </style>
  </head>
  <body>
    <div class="modal-container">
      <div class="modal-header">
        <h2>{{ bot.name }}</h2>
        <button
          class="close-btn"
          onclick="window.location.href='{{ url_for('index') }}'"
        >
          &times;
        </button>
      </div>

      <div class="modal-content">
        <img
          src="./static/images/hateslop/logo_black_genai.png"
          alt="{{ bot.name }}"
          class="bot-image"
        />

        <div class="bot-info">
          <h1>{{ bot.name }}</h1>

          <div class="tags">
            {% for tag in bot.tags %}
            <span class="tag">{{ tag }}</span>
            {% endfor %}
          </div>
        </div>

        <div class="username-area">
          <label for="username">ì´ë¦„:</label>
          <input type="text" id="username" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <a href="#" class="start-chat" id="start-chat-btn">ì±„íŒ… ì‹œì‘í•˜ê¸°</a>
      </div>
    </div>

    <script>
      const startChatBtn = document.getElementById("start-chat-btn");
      const usernameInput = document.getElementById("username");

      startChatBtn.addEventListener("click", function (event) {
        event.preventDefault();
        const username = usernameInput.value.trim() || "ì‚¬ìš©ì";
        window.location.href = `/chat?username=${encodeURIComponent(username)}`;
      });

      usernameInput.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
          startChatBtn.click();
        }
      });
    </script>
  </body>
</html>
</file>

<file path="DOCKER_GUIDE.md">
# ğŸ³ Docker í™œìš© ê°€ì´ë“œ

## Dockerë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

### 1. **í™˜ê²½ ì¼ê´€ì„± ë³´ì¥**

- ê°œë°œìì˜ ë¡œì»¬ í™˜ê²½(macOS, Windows, Linux)ê³¼ ê´€ê³„ì—†ì´ ë™ì¼í•œ í™˜ê²½ ì œê³µ
- Python ë²„ì „, ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€, Java ë“± ëª¨ë“  ì˜ì¡´ì„± í†µì¼
- "ë‚´ ì»´í“¨í„°ì—ì„œëŠ” ë˜ëŠ”ë°..." ë¬¸ì œ ì™„ì „ í•´ê²°

### 2. **ê°„í¸í•œ ì„¤ì •**

- ë³µì¡í•œ í™˜ê²½ ì„¤ì •ì„ `docker compose up` í•œ ë²ˆìœ¼ë¡œ í•´ê²°
- KoNLPyë¥¼ ìœ„í•œ Java ì„¤ì¹˜, Python ê°€ìƒí™˜ê²½ ë“± ìë™ ì²˜ë¦¬
- íŒ€ì› ê°„ ì„¤ì • ë¶ˆì¼ì¹˜ ì—†ìŒ

### 3. **ê²©ë¦¬ëœ í™˜ê²½**

- í”„ë¡œì íŠ¸ê°€ ì‹œìŠ¤í…œì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ
- ì—¬ëŸ¬ í”„ë¡œì íŠ¸ ë™ì‹œ ì‘ì—… ê°€ëŠ¥
- ê¹¨ë—í•œ ì œê±° ê°€ëŠ¥ (`docker compose down`)

---

## ğŸ“‹ ê¸°ìˆ  ê²€í†  ê²°ê³¼

### âœ… Docker ë„ì…ì˜ ì¥ì 

| í•­ëª©           | ê¸°ì¡´ ë°©ì‹       | Docker ë°©ì‹      |
| -------------- | --------------- | ---------------- |
| í™˜ê²½ ì„¤ì • ì‹œê°„ | 30ë¶„~1ì‹œê°„      | 5ë¶„ (ì²˜ìŒ 1íšŒë§Œ) |
| í™˜ê²½ ì¼ê´€ì„±    | âŒ OSë³„ ì°¨ì´    | âœ… ì™„ë²½íˆ ë™ì¼   |
| Java ì„¤ì¹˜      | ìˆ˜ë™ (KoNLPyìš©) | ìë™             |
| ì˜ì¡´ì„± ì¶©ëŒ    | ê°€ëŠ¥            | ì—†ìŒ (ê²©ë¦¬)      |
| ë°°í¬           | ë³µì¡            | ê°„ë‹¨             |
| íŒ€ í˜‘ì—…        | í™˜ê²½ ë¬¸ì œ ë¹ˆë²ˆ  | ë¬¸ì œ ì—†ìŒ        |

### âš ï¸ Docker ë„ì…ì˜ ë‹¨ì  ë° í•´ê²°ì±…

| ë‹¨ì            | ì˜í–¥ë„ | í•´ê²°ì±…                     |
| -------------- | ------ | -------------------------- |
| í•™ìŠµ ê³¡ì„       | ì¤‘ê°„   | ê°„ë‹¨í•œ ëª…ë ¹ì–´ë§Œ ì‚¬ìš© (3ê°œ) |
| ì´ˆê¸° ë¹Œë“œ ì‹œê°„ | ë‚®ìŒ   | ì²« ë¹Œë“œë§Œ 5ë¶„, ì´í›„ ì¦‰ì‹œ   |
| ë””ìŠ¤í¬ ìš©ëŸ‰    | ë‚®ìŒ   | ì•½ 2GB (Python + Java)     |
| Windows ì„±ëŠ¥   | ë‚®ìŒ   | WSL2 ì‚¬ìš© ì‹œ í•´ê²°          |

### ğŸ¯ ê²°ë¡ : **Docker ë„ì… ê°•ë ¥ ê¶Œì¥**

íŠ¹íˆ ë‹¤ìŒ ê²½ìš° Dockerê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤:

- âœ… 2ì¸ ì´ìƒ íŒ€ í”„ë¡œì íŠ¸
- âœ… Forkí•œ ë ˆí¬ë¥¼ ì—¬ëŸ¬ ì‚¬ëŒì´ ì‚¬ìš©
- âœ… Windows, macOS, Linuxê°€ í˜¼ì¬ëœ íŒ€
- âœ… KoNLPy(Java ì˜ì¡´ì„±)ë¥¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸
- âœ… ChromaDB ê°™ì€ ë¡œì»¬ DBë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ì¤€ë¹„

1. **Docker Desktop ì„¤ì¹˜**

   - macOS/Windows: [Docker Desktop ë‹¤ìš´ë¡œë“œ](https://www.docker.com/products/docker-desktop)
   - Linux: Docker Engine ì„¤ì¹˜

   ```bash
   # Ubuntu
   sudo apt-get update
   sudo apt-get install docker.io docker compose
   ```

2. **í™˜ê²½ë³€ìˆ˜ ì„¤ì •**

   ```bash
   # .env íŒŒì¼ ìƒì„±
   cp .env.example .env

   # í¸ì§‘ê¸°ë¡œ OPENAI_API_KEY ì…ë ¥
   nano .env
   ```

### Dockerë¡œ ì‹¤í–‰í•˜ê¸°

#### ë°©ë²• 1: Docker Compose (ê¶Œì¥)

```bash
# 1. ë¹Œë“œ ë° ì‹¤í–‰
docker compose up --build

# 2. ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
docker compose up -d

# 3. ë¡œê·¸ í™•ì¸
docker compose logs -f

# 4. ì¢…ë£Œ
docker compose down
```

#### ë°©ë²• 2: Dockerë§Œ ì‚¬ìš©

```bash
# 1. ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t chatbot-app .

# 2. ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -p 5000:5000 \
  -e OPENAI_API_KEY=your_key_here \
  -v $(pwd)/static/data:/app/static/data \
  chatbot-app

# 3. ì¢…ë£Œ
docker stop chatbot-app
```

---

## ğŸ“ ì£¼ìš” ëª…ë ¹ì–´

### ê°œë°œ ì¤‘

```bash
# ì•± ì‹œì‘
docker compose up

# ë³€ê²½ì‚¬í•­ ë°˜ì˜ (ì¬ë¹Œë“œ)
docker compose up --build

# ë¡œê·¸ ë³´ê¸°
docker compose logs -f chatbot

# ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker compose ps

# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì† (ë””ë²„ê¹…)
docker compose exec chatbot bash
```

### ìœ ì§€ë³´ìˆ˜

```bash
# ì»¨í…Œì´ë„ˆ ì •ì§€
docker compose stop

# ì»¨í…Œì´ë„ˆ ì‹œì‘ (ì¬ìƒì„± ì—†ì´)
docker compose start

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker compose restart

# ì™„ì „ ì‚­ì œ (ë³¼ë¥¨ í¬í•¨)
docker compose down -v

# ì´ë¯¸ì§€ ì‚­ì œ
docker rmi chatbot-app
```

### ë””ë²„ê¹…

```bash
# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ Python ì‹¤í–‰
docker compose exec chatbot python

# ì±—ë´‡ ëª¨ë“ˆ ì§ì ‘ í…ŒìŠ¤íŠ¸
docker compose exec chatbot python generation/chatbot/chatbot.py

# í™˜ê²½ë³€ìˆ˜ í™•ì¸
docker compose exec chatbot env

# ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ í™•ì¸
docker compose exec chatbot pip list
```

---

## ğŸ”§ ì„¤ì • ì»¤ìŠ¤í„°ë§ˆì´ì§•

### í¬íŠ¸ ë³€ê²½

`docker compose.yml`:

```yaml
ports:
  - "8080:5000" # ë¡œì»¬:8080 â†’ ì»¨í…Œì´ë„ˆ:5000
```

### í™˜ê²½ë³€ìˆ˜ ì¶”ê°€

`docker compose.yml`:

```yaml
environment:
  - OPENAI_API_KEY=${OPENAI_API_KEY}
  - CUSTOM_VAR=value
```

### ë³¼ë¥¨ ì¶”ê°€

`docker compose.yml`:

```yaml
volumes:
  - ./my-folder:/app/my-folder
```

---

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### Q: í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë¼ëŠ” ì˜¤ë¥˜

```bash
# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸
docker ps

# íŠ¹ì • í¬íŠ¸ ì‚¬ìš© í”„ë¡œì„¸ìŠ¤ ì°¾ê¸° (macOS/Linux)
lsof -i :5000

# í¬íŠ¸ ë³€ê²½ (docker compose.yml ìˆ˜ì •)
ports:
  - "8080:5000"
```

### Q: ë¹Œë“œê°€ ë„ˆë¬´ ëŠë¦¼

```bash
# ë¹Œë“œ ìºì‹œ ì‚¬ìš©
docker compose build --no-cache

# ë¹Œë“œ ì¤‘ê°„ ì¶œë ¥ í™•ì¸
docker compose build --progress=plain
```

### Q: ChromaDB ë°ì´í„°ê°€ ì‚¬ë¼ì§

```bash
# ë³¼ë¥¨ í™•ì¸
docker volume ls

# ë³¼ë¥¨ì„ ì‚­ì œí•˜ì§€ ì•Šê³  ì»¨í…Œì´ë„ˆë§Œ ì¢…ë£Œ
docker compose down  # (ëŒ€ì‹  docker compose down -v ì‚¬ìš©í•˜ì§€ ë§ê²ƒ)

# ë³¼ë¥¨ ë°±ì—…
docker run --rm -v chatbot-data:/data -v $(pwd):/backup \
  alpine tar czf /backup/chatbot-data-backup.tar.gz /data
```

### Q: KoNLPy ì˜¤ë¥˜

```bash
# Java ì„¤ì¹˜ í™•ì¸
docker compose exec chatbot java -version

# Java ê²½ë¡œ í™•ì¸
docker compose exec chatbot echo $JAVA_HOME

# ìˆ˜ë™ ì„¤ì¹˜ (í•„ìš”ì‹œ)
docker compose exec chatbot apt-get update && apt-get install -y default-jdk
```

### Q: ì½”ë“œ ë³€ê²½ì´ ë°˜ì˜ ì•ˆ ë¨

```bash
# ë³¼ë¥¨ ë§ˆìš´íŠ¸ í™•ì¸
docker compose exec chatbot ls -la /app

# ì¬ë¹Œë“œ
docker compose up --build

# ìºì‹œ ì—†ì´ ì¬ë¹Œë“œ
docker compose build --no-cache
```

---

## ğŸŒ Vercel vs Docker ë¹„êµ

| í•­ëª©         | Vercel        | Docker (ë¡œì»¬/í´ë¼ìš°ë“œ) |
| ------------ | ------------- | ---------------------- |
| ë°°í¬ ì†ë„    | ë§¤ìš° ë¹ ë¦„     | ë³´í†µ                   |
| ë¬´ë£Œ í‹°ì–´    | ì œí•œì         | ë¬´ì œí•œ (ë¡œì»¬)          |
| ChromaDB     | âŒ ì €ì¥ ì•ˆ ë¨ | âœ… ì˜ì†ì„± ë³´ì¥         |
| ì»¤ìŠ¤í„°ë§ˆì´ì§• | ì œí•œì         | ììœ ë¡œì›€               |
| ë””ë²„ê¹…       | ì–´ë ¤ì›€        | ì‰¬ì›€                   |
| ì¶”ì²œ ìš©ë„    | í”„ë¡œë•ì…˜ ë°°í¬ | ê°œë°œ/í…ŒìŠ¤íŠ¸            |

### ê¶Œì¥ ì›Œí¬í”Œë¡œìš°

```
ê°œë°œ: Docker (ë¡œì»¬)
  â†“
í…ŒìŠ¤íŠ¸: Docker (Docker Hub)
  â†“
ë°°í¬: Vercel ë˜ëŠ” AWS/GCP (Docker)
```

---

## ğŸ“¦ í”„ë¡œë•ì…˜ ë°°í¬

### Docker Hubì— í‘¸ì‹œ

```bash
# 1. Docker Hub ë¡œê·¸ì¸
docker login

# 2. ì´ë¯¸ì§€ íƒœê·¸
docker tag chatbot-app username/chatbot-app:latest

# 3. í‘¸ì‹œ
docker push username/chatbot-app:latest
```

### AWS/GCPì—ì„œ ì‹¤í–‰

```bash
# Docker ì´ë¯¸ì§€ pull
docker pull username/chatbot-app:latest

# ì‹¤í–‰
docker run -d -p 80:5000 \
  -e OPENAI_API_KEY=your_key \
  --restart always \
  username/chatbot-app:latest
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

Docker í™˜ê²½ ì„¤ì • ì‹œ í™•ì¸ì‚¬í•­:

- [ ] Docker Desktop ì„¤ì¹˜ ë° ì‹¤í–‰ í™•ì¸
- [ ] `.env` íŒŒì¼ ìƒì„± ë° API í‚¤ ì…ë ¥
- [ ] `docker compose up --build` ì„±ê³µ í™•ì¸
- [ ] `http://localhost:5001` ì ‘ì† í™•ì¸
- [ ] `/health` ì—”ë“œí¬ì¸íŠ¸ ì‘ë‹µ í™•ì¸
- [ ] ì±„íŒ… ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸
- [ ] ë°ì´í„° ì˜ì†ì„± í™•ì¸ (ì¬ì‹œì‘ í›„)

---

## ğŸ“š ì¶”ê°€ ìë£Œ

- [Docker ê³µì‹ ë¬¸ì„œ](https://docs.docker.com/)
- [Docker Compose ë¬¸ì„œ](https://docs.docker.com/compose/)
- [Flask Docker ë°°í¬ ê°€ì´ë“œ](https://flask.palletsprojects.com/en/2.3.x/deploying/docker/)

---

**Made with ğŸ³ Docker**
</file>

<file path="Dockerfile">
# Python 3.11 slim ì´ë¯¸ì§€ ì‚¬ìš© (ê²½ëŸ‰í™”)
FROM python:3.11-slim

# ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /app

# ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ ë° í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN apt-get update && apt-get install -y \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# Python ì˜ì¡´ì„± íŒŒì¼ ë³µì‚¬
COPY requirements.txt .

# Python íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN pip install --no-cache-dir -r requirements.txt

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë³µì‚¬
COPY . .

# ChromaDB ë°ì´í„° ë””ë ‰í† ë¦¬ ìƒì„±
RUN mkdir -p static/data/chatbot/chardb_embedding \
    static/data/chatbot/imagedb_embedding

# í™˜ê²½ë³€ìˆ˜ ê¸°ë³¸ê°’ ì„¤ì •
ENV FLASK_ENV=production
ENV FLASK_DEBUG=False
ENV PORT=5000

# í¬íŠ¸ ë…¸ì¶œ
EXPOSE 5000

# í—¬ìŠ¤ì²´í¬ ì„¤ì •
HEALTHCHECK --interval=30s --timeout=3s --start-period=40s --retries=3 \
    CMD python -c "import urllib.request; urllib.request.urlopen('http://localhost:5000/health')" || exit 1

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
CMD ["python", "app.py"]
</file>

<file path="templates/chat.html">
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ bot_name }}ì™€ ëŒ€í™”í•˜ê¸°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&display=swap"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='css/style.css') }}"
      rel="stylesheet"
    />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
      }
      body {
        font-family: "IBM Plex Sans KR", sans-serif;
        background: #f7f7f7;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .header {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;

        padding: 15px 20px;
        box-sizing: border-box;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .header-center {
        flex: 1;
        text-align: center;
        font-size: 1.5rem;
        font-weight: 600;
        color: #333;
      }
      .close-btn {
        font-size: 1.2rem;
        background: none;
        border: none;
        cursor: pointer;
        color: #666;
        padding: 5px 10px;
      }
      .chat-area {
        width: 100%;
        max-width: 900px;
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 20px;
        box-sizing: border-box;
        position: relative;
      }
      #chat-log {
        flex: 1;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 20px;
        background: white;
        overflow-y: auto;
        margin-bottom: 15px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }
      .message {
        margin-bottom: 15px;
        padding: 12px;
        border-radius: 12px;
        word-wrap: break-word;
        animation: fadeIn 0.3s;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .message.user {
        text-align: right;
        color: #0056b3;
        margin-left: 20%;
      }
      .message.bot {
        background: #f5f5f5;
        color: #333;
        margin-right: 20%;
      }
      .bot-big-img {
        display: block;
        width: 100%;
        max-width: 300px;
        height: auto;
        margin: 10px auto;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .chat-input-area {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      .chat-input-area input[type="text"] {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid #ddd;
        border-radius: 25px;
        font-size: 1rem;
        transition: border 0.2s;
      }
      .chat-input-area input[type="text"]:focus {
        outline: none;
        border-color: #764ba2;
      }
      .chat-input-area button.send-btn {
        padding: 12px 24px;
        border: none;

        color: #fff;
        border-radius: 25px;
        font-size: 1rem;
        cursor: pointer;
        transition: transform 0.2s;
      }
      .chat-input-area button.send-btn:hover {
        transform: translateY(-2px);
      }
      .media-buttons {
        position: absolute;
        left: -60px;
        bottom: 80px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .media-buttons button {
        width: 45px;
        height: 45px;
        background: white;
        border: 2px solid #ddd;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
      }
      .media-buttons button:hover {
        background: #764ba2;
        border-color: #764ba2;
        color: white;
        transform: scale(1.1);
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.7);
      }
      .modal-content {
        background-color: #fff;
        margin: 2% auto;
        padding: 30px;
        border-radius: 12px;
        width: 90%;
        max-width: 1000px;
        position: relative;
        animation: slideIn 0.3s;
      }
      @keyframes slideIn {
        from {
          transform: translateY(-50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      .modal-close {
        position: absolute;
        top: 15px;
        right: 20px;
        background: none;
        border: none;
        font-size: 2rem;
        cursor: pointer;
        color: #999;
      }
      .modal-close:hover {
        color: #333;
      }
      .image-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }
      .image-grid img {
        width: 100%;
        height: auto;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.2s;
      }
      .image-grid img:hover {
        transform: scale(1.05);
      }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="header-center">{{ bot_name }}</div>
      <button
        class="close-btn"
        onclick="window.location.href='{{ url_for('index') }}'"
      >
        &times;
      </button>
    </header>

    <div class="chat-area" data-username="{{ username }}">
      <div id="chat-log"></div>

      <div class="chat-input-area">
        <input
          type="text"
          id="user-message"
          placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
        />
        <button class="send-btn" id="send-btn">ì „ì†¡</button>
      </div>
    </div>

    <!-- Image Gallery Modal -->
    <div id="imageModal" class="modal">
      <div class="modal-content">
        <button class="modal-close" data-close-modal="imageModal">
          &times;
        </button>
        <h2>ğŸ“· ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬</h2>
        <div class="image-grid">
          {% if image_files %} {% for filename in image_files %}
          <img
            src="./static/images/hateslop/logo_black_genai.png"
            alt="{{ filename }}"
          />
          {% endfor %} {% else %}
          <p>ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Video Modal -->
    <div id="videoModal" class="modal">
      <div class="modal-content">
        <button class="modal-close" data-close-modal="videoModal">
          &times;
        </button>
        <h2>ğŸ¬ ì˜ìƒ ë³´ê¸°</h2>
        <video
          controls
          style="width: 100%; border-radius: 12px; margin-top: 20px"
        >
          <source
            src="{{ url_for('static', filename='videos/chatbot/video.mp4') }}"
            type="video/mp4"
          />
          ë¸Œë¼ìš°ì €ê°€ ë¹„ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        </video>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/chatbot_single.js') }}"></script>
  </body>
</html>
</file>

<file path="templates/index.html">
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ bot.name }} - ìºë¦­í„° ì±—ë´‡</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&display=swap"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='css/style.css') }}"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "IBM Plex Sans KR", sans-serif;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .container {
        max-width: 600px;
        width: 90%;
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        overflow: hidden;
      }
      .header {
        padding: 30px;
        text-align: center;
      }
      .header h1 {
        margin: 0 0 10px 0;
        font-size: 2rem;
        color: #333;
      }
      .header p {
        margin: 0;
        color: #666;
        font-size: 0.9rem;
      }
      .card {
        padding: 40px;
        text-align: center;
      }
      .card img {
        width: 200px;
        height: 200px;
        object-fit: cover;
        border-radius: 50%;
        margin-bottom: 20px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      }
      .card h2 {
        margin: 10px 0;
        font-size: 1.8rem;
        color: #333;
      }
      .tags {
        margin: 15px 0;
      }
      .tag {
        display: inline-block;
        background: #e0e0e0;
        color: #555;
        padding: 6px 12px;
        border-radius: 15px;
        margin: 4px;
        font-size: 0.9rem;
      }
      .description {
        margin: 20px 0;
        color: #666;
        line-height: 1.6;
      }
      .start-btn {
        display: inline-block;
        margin-top: 20px;
        padding: 15px 40px;
        color: white;
        background: #764ba2;
        text-decoration: none;
        border-radius: 25px;
        font-size: 1.1rem;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .start-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
      }
      .footer {
        padding: 20px;
        text-align: center;
        background: #f7f7f7;
        color: #999;
        font-size: 0.85rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ëª¨ë“  ìŠ¤íƒ€ì¼ ììœ ë¡­ê²Œ ë°”ê¾¸ì‹œë©´ ë©ë‹ˆë‹¤.</h1>
      </div>
      <div class="card" style="flex-direction: column; align-items: center">
        <img
          src="./static/images/hateslop/logo_black_genai.png"
          alt="{{ bot.name }}"
        />
        <a href="{{ url_for('detail') }}" class="start-btn">ì‹œì‘í•˜ê¸°</a>
      </div>
    </div>
  </body>
</html>
</file>

<file path="docker-compose.yml">
version: "3.8"

services:
  chatbot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: chatbot-app
    ports:
      - "5001:5000"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - FLASK_ENV=development
      - FLASK_DEBUG=True
      - SECRET_KEY=${SECRET_KEY:-dev-secret-key-please-change}
    volumes:
      # ê°œë°œ ì‹œ ì½”ë“œ ë³€ê²½ì‚¬í•­ ì‹¤ì‹œê°„ ë°˜ì˜
      - ./app.py:/app/app.py
      - ./services:/app/services
      - ./templates:/app/templates
      - ./static:/app/static
      - ./config:/app/config
      # ChromaDB ë°ì´í„° ì˜ì†ì„± ë³´ì¥
      - chatbot-data:/app/static/data/chatbot
    restart: unless-stopped
    networks:
      - chatbot-network
    healthcheck:
      test:
        [
          "CMD",
          "python",
          "-c",
          "import urllib.request; urllib.request.urlopen('http://localhost:5000/health')",
        ]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 40s

volumes:
  chatbot-data:
    driver: local

networks:
  chatbot-network:
    driver: bridge
</file>

<file path="app.py">
"""
ğŸš« ì´ íŒŒì¼ì€ ìˆ˜ì •í•˜ì§€ ë§ˆì„¸ìš”! (í…œí”Œë¦¿ íŒŒì¼)

ì´ íŒŒì¼ì€ Flask ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ë¡œì§ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.
í•™íšŒì›ì€ ë‹¤ìŒ íŒŒì¼ë§Œ ìˆ˜ì •/ì‘ì„±í•˜ë©´ ë©ë‹ˆë‹¤:

âœï¸ ìˆ˜ì •/ì‘ì„±í•´ì•¼ í•˜ëŠ” íŒŒì¼:
  - config/chatbot_config.json        (ì±—ë´‡ ì„¤ì •)
  - services/chatbot_service.py       (AI ë¡œì§: RAG, Embedding, LLM)
  - static/data/chatbot/chardb_text/  (í…ìŠ¤íŠ¸ ë°ì´í„°)
  - static/images/chatbot/            (ì´ë¯¸ì§€ íŒŒì¼)
  - static/videos/chatbot/            (ë¹„ë””ì˜¤ íŒŒì¼, ì„ íƒ)

ì´ íŒŒì¼ì„ ìˆ˜ì •í•˜ë©´ ì „ì²´ ì‹œìŠ¤í…œì´ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
"""

import os
import json
from pathlib import Path
from flask import Flask, request, render_template, jsonify, url_for
from dotenv import load_dotenv

# í™˜ê²½ë³€ìˆ˜ ë¡œë“œ
load_dotenv()

app = Flask(__name__)
app.secret_key = os.getenv('SECRET_KEY', 'dev-secret-key-change-this')

# ê°œë°œ í™˜ê²½ ì„¤ì •
app.config['TEMPLATES_AUTO_RELOAD'] = True
app.config['SEND_FILE_MAX_AGE_DEFAULT'] = 0

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ
BASE_DIR = Path(__file__).resolve().parent

# ì„¤ì • íŒŒì¼ ë¡œë“œ
CONFIG_PATH = BASE_DIR / 'config' / 'chatbot_config.json'

def load_config():
    """ì±—ë´‡ ì„¤ì • íŒŒì¼ ë¡œë“œ"""
    try:
        with open(CONFIG_PATH, 'r', encoding='utf-8') as f:
            return json.load(f)
    except FileNotFoundError:
        # ê¸°ë³¸ ì„¤ì • ë°˜í™˜
        return {
            'name': 'ì±—ë´‡',
            'description': 'ì±—ë´‡ ì„¤ëª…',
            'tags': ['#ì±—ë´‡'],
            'thumbnail': 'images/hateslop/club_logo.png'
        }

config = load_config()

# ì´ë¯¸ì§€ íŒŒì¼ ìŠ¤ìº” í•¨ìˆ˜
def get_image_files():
    """ì±—ë´‡ ì´ë¯¸ì§€ ë””ë ‰í† ë¦¬ì—ì„œ ì´ë¯¸ì§€ íŒŒì¼ ëª©ë¡ ë°˜í™˜"""
    folder_path = BASE_DIR / "static" / "images" / "chatbot"
    image_files = []
    
    if folder_path.exists():
        for root, dirs, files in os.walk(folder_path):
            for file in files:
                if file.lower().endswith((".png", ".jpg", ".jpeg", ".gif")):
                    rel_path = os.path.relpath(os.path.join(root, file), folder_path)
                    image_files.append(rel_path.replace("\\", "/"))
    
    return image_files

# ë©”ì¸ í˜ì´ì§€
@app.route('/')
def index():
    bot_info = {
        'name': config.get('name', 'ì±—ë´‡'),
        'image': url_for('static', filename=config.get('thumbnail', 'images/hateslop/club_logo.png')),
        'tags': config.get('tags', ['#ì±—ë´‡']),
        'description': config.get('description', '')
    }
    return render_template('index.html', bot=bot_info)

# ì±—ë´‡ ìƒì„¸ì •ë³´ í˜ì´ì§€
@app.route('/detail')
def detail():
    bot_info = {
        'name': config.get('name', 'ì±—ë´‡'),
        'image': url_for('static', filename=config.get('thumbnail', 'images/hateslop/club_logo.png')),
        'description': config.get('description', ''),
        'tags': config.get('tags', ['#ì±—ë´‡'])
    }
    return render_template('detail.html', bot=bot_info)

# ì±„íŒ… í™”ë©´
@app.route('/chat')
def chat():
    username = request.args.get('username', 'ì‚¬ìš©ì')
    bot_name = config.get('name', 'ì±—ë´‡')
    image_files = get_image_files()
    
    return render_template('chat.html', 
                         bot_name=bot_name, 
                         username=username,
                         image_files=image_files)

# API ì—”ë“œí¬ì¸íŠ¸: ì±—ë´‡ ì‘ë‹µ ìƒì„±
@app.route('/api/chat', methods=['POST'])
def api_chat():
    try:
        data = request.get_json()
        user_message = data.get('message', '')
        username = data.get('username', 'ì‚¬ìš©ì')
        
        if not user_message:
            return jsonify({'error': 'Message is required'}), 400
        
        # ì±—ë´‡ ì„œë¹„ìŠ¤ ì„í¬íŠ¸ (ì§€ì—° ë¡œë”©)
        from services import get_chatbot_service
        
        # ì‘ë‹µ ìƒì„±
        chatbot = get_chatbot_service()
        response = chatbot.generate_response(user_message, username)
        
        return jsonify(response)
        
    except ImportError as e:
        print(f"[ERROR] ì±—ë´‡ ì„œë¹„ìŠ¤ ì„í¬íŠ¸ ì‹¤íŒ¨: {e}")
        return jsonify({'reply': 'ì±—ë´‡ ì„œë¹„ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. services/chatbot_service.pyë¥¼ êµ¬í˜„í•´ì£¼ì„¸ìš”.'}), 500
    except Exception as e:
        print(f"[ERROR] ì‘ë‹µ ìƒì„± ì‹¤íŒ¨: {e}")
        return jsonify({'reply': 'ì£„ì†¡í•´ìš”, ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'}), 500

# í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ (Vercelìš©)
@app.route('/health')
def health():
    return jsonify({'status': 'ok', 'chatbot': config.get('name', 'unknown')})

if __name__ == '__main__':
    port = int(os.getenv('PORT', 5000))
    debug = os.getenv('FLASK_ENV') == 'development'
    app.run(host='0.0.0.0', port=port, debug=debug)
</file>

<file path="README.md">
# HateSlop 3ê¸° ì—”ì§€ë‹ˆì–´xí”„ë¡œë“€ì„œ í•©ë™ ìºë¦­í„° ì±—ë´‡ í”„ë¡œì íŠ¸

GOAL)

- AIë¥¼ ì´ìš©í•´ ë¹ ë¥´ê²Œ ê°œë…ì— ëŒ€í•´ í•™ìŠµí•˜ê³  ì‹¤ìŠµì„ ì§„í–‰í•©ë‹ˆë‹¤.
- AIë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ì—¬ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.
- AIê°€ ì½”ë“œë¥¼ ì§œëŠ” ê²ƒì„ ë³´ë©° AIê°€ í•  ìˆ˜ ìˆëŠ” ê²ƒê³¼ ë‚´ê°€ í•  ìˆ˜ ìˆëŠ” ê²ƒì— ëŒ€í•œ ì„±ì°°ì„ ì–»ìœ¼ì„¸ìš”.
- ì•ìœ¼ë¡œ ì½”ë“œëŠ” ì‚¬ëŒì´ ì§œì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤. ê·¸ ì‹œê°„ì— AIê°€ í•  ìˆ˜ ì—†ëŠ” ê²ƒê³¼ ë³¸ì¸ ë‚´ì‹¤ì— ì§‘ì¤‘í•˜ì—¬ ëª¸ê°’ì„ ê¸°ë¥´ì„¸ìš”.
- ë°”ì´ë¸Œì½”ë”© ë“± í˜„ì¬ ìœ í–‰í•˜ëŠ” ëª¨ë“  AI ê¸°ë²•ì„ ì²´í™”í•˜ëŠ” ê²ƒê¹Œì§€ê°€ í”„ë¡œì íŠ¸ì˜ ëª©ì ì…ë‹ˆë‹¤.

> ìš´ì˜ì§„ì´ ìµœì‹  Claude 4.5 ëª¨ë¸ê³¼ í•¨ê»˜ êµ¬ì„±í•œ ëª¨ë²”ë‹µì•ˆì€ `answer-sheet` ë¸Œëœì¹˜ì— ìˆìŠµë‹ˆë‹¤.  
> ë‹µì•ˆì„ ê³µê°œí•˜ê³  AI í™œìš©ì„ ì¥ë ¤í•˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
>
> ì²«ì§¸, Hateslop í•™íšŒì›ì€ ìŠ¤ìŠ¤ë¡œ ë°°ìš°ê³ ì í•˜ëŠ” ì˜ì§€ê°€ ê²€ì¦ëœ ì‚¬ëŒë“¤ë¡œ, ìê¸°ì£¼ë„ì  í•™ìŠµì´ ì „ì œë˜ì–´ ìˆìŠµë‹ˆë‹¤.  
> ìš°ë¦¬ëŠ” ì—¬ëŸ¬ë¶„ì´ ë‹¨ìˆœíˆ ì œì¶œì„ ìœ„í•œ ê³¼ì œë¥¼ ì‘ì„±í•˜ì§€ ì•Šì„ ê²ƒì´ë¼ëŠ” ë¯¿ìŒì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
>
> ë‘˜ì§¸, ì˜¤ëŠ˜ë‚  AIë¡œ ì •ë‹µì„ ì°¾ëŠ” ê²ƒì€ ì–´ë µì§€ ì•ŠìŠµë‹ˆë‹¤.  
> ì¤‘ìš”í•œ ê²ƒì€ ê·¸ ì •ë‹µì— ì´ë¥´ê¸°ê¹Œì§€ì˜ ì‚¬ê³  ê³¼ì •ê³¼ ì¶”ë¡  ëŠ¥ë ¥, ê·¸ë¦¬ê³  ë” ë‚˜ì€ ë‹µì„ ë„ì¶œí•˜ë ¤ëŠ” ë¬¸ì œ í•´ê²°ë ¥ì„ ê¸°ë¥´ëŠ” ì¼ì…ë‹ˆë‹¤.
>
> ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë‹¨ìˆœíˆ ê²°ê³¼ë¥¼ ë³µì œí•˜ëŠ” ë° ê·¸ì¹˜ì§€ ë§ê³ , AIë¥¼ ë„êµ¬ë¡œ ì‚¼ì•„ ìŠ¤ìŠ¤ë¡œ ì‚¬ê³ í•˜ê³  íƒêµ¬í•˜ë©° ì„±ì¥í•˜ê¸¸ ë°”ëë‹ˆë‹¤.

> \*ë°”ì´ë¸Œì½”ë”© êµìœ¡ì€ í•™íšŒ ì»¤ë¦¬í˜ëŸ¼ì— ë§ì¶° ì¶”í›„ ì§„í–‰ë  ì˜ˆì •ì…ë‹ˆë‹¤.

TIPS)

- ìœ ë£Œ) ë°”ì´ë¸Œì½”ë”© íˆ´ì„ ì´ìš©í•œë‹¤ë©´ ê·¸ë¥¼ í™œìš©í•˜ì„¸ìš”.
- ë¬´ë£Œ) repomix ë¥¼ ì´ìš©í•´ ì½”ë“œë² ì´ìŠ¤ ì „ì²´ë¥¼ google ai studio ì— ë„£ì–´ì„œ ì •í™•í•œ ë‚´ìš© ê¸°ë°˜ìœ¼ë¡œ LLM ê³¼ ë¶„ì„í•˜ì„¸ìš”. (Google AI Studio ë¥¼ ì“°ëŠ” ì´ìœ ëŠ” ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Token ìˆ˜ê°€ 1Mìœ¼ë¡œ íƒ€ ì„œë¹„ìŠ¤ ëŒ€ë¹„ ì••ë„ì ìœ¼ë¡œ ë§ê³  ë¬´ë£Œì´ê¸° ë•Œë¬¸)

  [repomix í™œìš©ë°©ë²•](https://pickle-snail-efe.notion.site/AgentOps-241e1458c63781dba0b1d451eddb3b48)

  [gitingest : GitHub ì €ì¥ì†Œë¥¼ LLM ì¹œí™”ì ì¸ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ë„êµ¬](https://discuss.pytorch.kr/t/gitingest-github-llm/6896)

  [deepwiki : Github ê¸°ë°˜ í”„ë¡œì íŠ¸ ë¶„ì„ë°©ë²•](https://deepwiki.org/)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python](https://img.shields.io/badge/Python-3.11-blue.svg)](https://www.python.org/)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)

## âš¡ ë¹ ë¥¸ ì‹œì‘

- hateslop organizationì—ì„œ fork í•œ ê²ƒì´ë¼ ê°€ì •
- docker desktop ì„¤ì¹˜ ë° ì‹¤í–‰í•œ ìƒíƒœë¼ ê°€ì •

```bash
# 1. Fork & Clone
git clone https://github.com/YOUR_USERNAME/chatbot-project.git
cd chatbot-project

# 2. .env íŒŒì¼ ìƒì„± ë° API í‚¤ ì…ë ¥
cp .env.example .env
nano .env  # OPENAI_API_KEY ì…ë ¥

# 3. Docker ì‹¤í–‰
docker compose up --build

# 4. ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:5001 ì ‘ì†
```

**ì •ìƒ ì‘ë™ í™”ë©´**

ë©”ì¸ í˜ì´ì§€

![ë©”ì¸ í˜ì´ì§€](static/images/hateslop/example1.png)

ìƒì„¸ í˜ì´ì§€

![ìƒì„¸ í˜ì´ì§€](static/images/hateslop/example2.png)

ì±„íŒ… í˜ì´ì§€

![ì±„íŒ… í˜ì´ì§€](static/images/hateslop/example3.png)

---

## ğŸ“š ë¬¸ì„œ ê°€ì´ë“œ

| ë¬¸ì„œ                                                | ë‚´ìš©                         | ë¹„ê³      |
| --------------------------------------------------- | ---------------------------- | -------- |
| **[README.md](README.md)** â­â­                     | í”„ë¡œì íŠ¸ ê°œìš” (í•„ë…)         | í˜„ì¬ë¬¸ì„œ |
| **[ARCHITECTURE.md](ARCHITECTURE.md)** â­â­         | ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (í•„ë…)       | í•„ë…     |
| **[DOCKER_HOT_RELOAD.md](DOCKER_HOT_RELOAD.md)** ğŸ”¥ | Docker ê°œë°œ í™˜ê²½ ì‹¤ì „ ê°€ì´ë“œ | (ì°¸ê³ )   |
| **[DOCKER_GUIDE.md](DOCKER_GUIDE.md)**              | Docker ì‚¬ìš© ì™„ì „ ê°€ì´ë“œ      | (ì°¸ê³ )   |
| **[ADVANCED_TOPICS.md](ADVANCED_TOPICS.md)** ğŸš€     | ì„±ëŠ¥ ê°œì„  & ìµœì‹  ê¸°ìˆ  íŠ¸ë Œë“œ | (ì‹¬í™”)   |

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

í—¤ì´íŠ¸ìŠ¬ë¡­ í”„ë¡œë“€ì„œ ì—”ì§€ë‹ˆì–´ í•©ë™ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

- ğŸ“– **í•™ìŠµ ëª©í‘œ**: RAG, Embedding, LLM, Vector Database
- ğŸ‘¥ **í˜‘ì—… ë°©ì‹**: í”„ë¡œë“€ì„œê°€ ê¸°íší•œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ìºë¦­í„° ì±—ë´‡ì„ ì™„ì„±
- ğŸš€ **ë°°í¬**: Vercel CLIë¥¼ í†µí•œ í”„ë¡œë•ì…˜ ë°°í¬
- ğŸ³ **í™˜ê²½**: Dockerë¡œ ì¼ê´€ëœ ê°œë°œ í™˜ê²½ ë³´ì¥

### í•µì‹¬ ê¸°ëŠ¥

- ğŸ¤– **OpenAI GPT** ê¸°ë°˜ ëŒ€í™” ìƒì„±
- ğŸ“š **RAG** (Retrieval-Augmented Generation)ë¥¼ í†µí•œ ì§€ì‹ ê¸°ë°˜ ë‹µë³€
- ğŸ’¾ **ChromaDB**ë¥¼ í™œìš©í•œ ì„ë² ë”© ë²¡í„° ì €ì¥
- ğŸ§  **LangChain** ê¸°ë°˜ ëŒ€í™” ë©”ëª¨ë¦¬ ê´€ë¦¬
- ğŸ¨ **Vanilla JavaScript** ê¸°ë°˜ ì›¹ ì¸í„°í˜ì´ìŠ¤
- ğŸ³ **Docker**ë¥¼ í†µí•œ í™˜ê²½ ì¼ê´€ì„± ë³´ì¥

### ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: Flask (Python 3.11)
- **AI**: OpenAI API, LangChain, ChromaDB
- **Frontend**: Vanilla JavaScript, HTML, CSS
- **Deployment**: Docker, Vercel CLI
- **Version Control**: Git, GitHub

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
chatbot-project/
â”œâ”€â”€ app.py                     # ğŸš« í…œí”Œë¦¿ (ìˆ˜ì • ê¸ˆì§€, ìˆ˜ì • ì›í•œë‹¤ë©´ ì˜ì¡´ì„± ìˆëŠ” íŒŒì¼)
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ chatbot_service.py     # âœï¸ í•™íšŒì› êµ¬í˜„ íŒŒì¼ (AI ë¡œì§)
â”œâ”€â”€ config/
â”‚   â””â”€â”€ chatbot_config.json    # âœï¸ ì±—ë´‡ ì„¤ì • (ì˜ˆì‹œ)
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ chatbot/
â”‚   â”‚       â””â”€â”€ chardb_text/   # âœï¸ í…ìŠ¤íŠ¸ ë°ì´í„° (ì˜ˆì‹œ)
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ chatbot/           # âœï¸ ì´ë¯¸ì§€ íŒŒì¼
â”‚   â”œâ”€â”€ videos/
â”‚   â”‚   â””â”€â”€ chatbot/           # âœï¸ ë¹„ë””ì˜¤ íŒŒì¼ (ì„ íƒ)
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css          # ğŸš« í…œí”Œë¦¿ (ìˆ˜ì • ê¸ˆì§€, ìŠ¤íƒ€ì¼ ë³€ê²½ ì›í•˜ë©´ ìˆ˜ì • ê°€ëŠ¥)
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ chatbot.js         # ğŸš« í…œí”Œë¦¿ (ìˆ˜ì • ê¸ˆì§€, ìˆ˜ì • ì›í•œë‹¤ë©´ ì˜ì¡´ì„± ìˆëŠ” íŒŒì¼ í•¨ê»˜ ìˆ˜ì •)
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.html             # ğŸš« í…œí”Œë¦¿ (ìˆ˜ì • ê¸ˆì§€, ìˆ˜ì • ì›í•œë‹¤ë©´ ì˜ì¡´ì„± ìˆëŠ” íŒŒì¼ í•¨ê»˜ ìˆ˜ì •)
â”‚   â”œâ”€â”€ detail.html            # ğŸš« í…œí”Œë¦¿ (ìˆ˜ì • ê¸ˆì§€, ìˆ˜ì • ì›í•œë‹¤ë©´ ì˜ì¡´ì„± ìˆëŠ” íŒŒì¼ í•¨ê»˜ ìˆ˜ì •)
â”‚   â””â”€â”€ chat.html              # ğŸš« í…œí”Œë¦¿ (ìˆ˜ì • ê¸ˆì§€, ìˆ˜ì • ì›í•œë‹¤ë©´ ì˜ì¡´ì„± ìˆëŠ” íŒŒì¼ í•¨ê»˜ ìˆ˜ì •)
â”œâ”€â”€ Dockerfile                 # ğŸš« í…œí”Œë¦¿
â”œâ”€â”€ docker-compose.yml         # ğŸš« í…œí”Œë¦¿
â”œâ”€â”€ requirements.txt           # ğŸš« í…œí”Œë¦¿
â”œâ”€â”€ vercel.json                # ğŸš« í…œí”Œë¦¿
â”œâ”€â”€ .env.example               # ì°¸ê³ ìš©
â””â”€â”€ README.md                  # í˜„ì¬ íŒŒì¼
```

### ğŸ“ íŒŒì¼ë³„ ì—­í• 

#### ğŸš« í…œí”Œë¦¿ íŒŒì¼ (ìˆ˜ì •í•˜ì§€ ë§ˆì„¸ìš”!)

- `app.py`: Flask ì• í”Œë¦¬ì¼€ì´ì…˜ í•µì‹¬ ë¡œì§
- `templates/*.html`: ì›¹ UI í…œí”Œë¦¿
- `static/css/`, `static/js/`: í”„ë¡ íŠ¸ì—”ë“œ ë¦¬ì†ŒìŠ¤
- `Dockerfile`, `docker-compose.yml`: Docker ì„¤ì •
- `requirements.txt`: Python ì˜ì¡´ì„±

> _ì»¤ìŠ¤í…€ ì›í•˜ì‹œë©´ ìˆ˜ì •í•˜ì…”ë„ ë˜ì§€ë§Œ, ì˜ì¡´ì„±ì„ ê°€ì§„ íŒŒì¼ì„ ê°™ì´ ìˆ˜ì •í•˜ì…”ì•¼ í•©ë‹ˆë‹¤._

#### âœï¸ ì‘ì„±/ìˆ˜ì •í•  íŒŒì¼

- `services/chatbot_service.py`: **AI ë¡œì§ êµ¬í˜„** (RAG, Embedding, LLM)
- `config/chatbot_config.json`: ì±—ë´‡ ì„¤ì • (ì´ë¦„, ì„±ê²©, ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸)
- `static/data/chatbot/chardb_text/`: í…ìŠ¤íŠ¸ ë°ì´í„° (json, markdown, txt ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.)
- `static/images/chatbot/`: ì±—ë´‡ ê´€ë ¨ ì´ë¯¸ì§€

## ğŸ“š í•™ìŠµ ìë£Œ

### ê³µì‹ ë¬¸ì„œ

1. **OpenAI API Documentation**
   - https://platform.openai.com/docs
2. **LangChain Documentation**
   - https://python.langchain.com/docs
3. **ChromaDB Documentation**
   - https://docs.trychroma.com/

### ì¶”ì²œ ë…¼ë¬¸

1. **RAG ê¸°ì´ˆ**: "Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks" (Lewis et al., 2020)

   - https://arxiv.org/abs/2005.11401

2. **Self-RAG**: "Self-RAG: Learning to Retrieve, Generate, and Critique" (Asai et al., 2024)
   - https://arxiv.org/abs/2310.11511

**ë” ë§ì€ ìë£Œ**: [ADVANCED_TOPICS.md](ADVANCED_TOPICS.md#-ê´€ë ¨-ë…¼ë¬¸-ë°-ì—°êµ¬)
</file>

</files>
